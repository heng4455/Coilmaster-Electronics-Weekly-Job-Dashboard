{"ast":null,"code":"var _jsxFileName = \"D:\\\\DVweekly\\\\frontend\\\\src\\\\App.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\nimport { supabase } from './supabaseClient';\n// import { TransitionGroup } from 'react-transition-group'; // ลบบรรทัดนี้ออก หรือคอมเมนต์ไว้\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [jobs, setJobs] = useState([]);\n  const [profiles, setProfiles] = useState([]);\n  const [newJob, setNewJob] = useState('');\n  const [newAssignedTo, setNewAssignedTo] = useState('');\n  const [newDueDate, setNewDueDate] = useState('');\n  const [newRemark, setNewRemark] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [authMode, setAuthMode] = useState('login'); // login | signup | reset\n  const [errorMsg, setErrorMsg] = useState('');\n  const [editingRemarkId, setEditingRemarkId] = useState(null);\n  const [animatingJobId, setAnimatingJobId] = useState(null); // State สำหรับควบคุม Animation\n  const jobRefs = useRef({}); // สร้าง ref สำหรับเก็บ DOM element ของแต่ละงาน\n\n  // โหลด user ปัจจุบัน\n  useEffect(() => {\n    supabase.auth.getUser().then(({\n      data,\n      error\n    }) => {\n      if (error || !data.user) {\n        setUser(null);\n        // ลบ localStorage ที่เกี่ยวกับ supabase\n        Object.keys(localStorage).filter(k => k.startsWith('sb-')).forEach(k => localStorage.removeItem(k));\n      } else {\n        setUser(data.user);\n      }\n      setLoading(false);\n    });\n    supabase.auth.onAuthStateChange(async (_event, session) => {\n      setUser((session === null || session === void 0 ? void 0 : session.user) || null);\n      setJobs([]);\n      setProfiles([]);\n      setLoading(false);\n      // ถ้า login สำเร็จและยังไม่มี profile ให้ insert profile\n      if (session !== null && session !== void 0 && session.user) {\n        var _session$user$user_me;\n        const {\n          data: profile\n        } = await supabase.from('profiles').select('*').eq('user_id', session.user.id).single();\n        if (!profile && (_session$user$user_me = session.user.user_metadata) !== null && _session$user$user_me !== void 0 && _session$user$user_me.user_name) {\n          await supabase.from('profiles').insert([{\n            user_id: session.user.id,\n            username: session.user.user_metadata.user_name\n          }]);\n        }\n      }\n      // force reload profiles ทุกครั้งหลัง login/logout\n      const {\n        data: newProfiles\n      } = await supabase.from('profiles').select('*');\n      setProfiles(newProfiles || []);\n    });\n  }, []);\n\n  // โหลด jobs และ profiles จาก Supabase ทุกครั้งที่ user เปลี่ยน\n  useEffect(() => {\n    console.log('useEffect [user] called, user:', user);\n    setLoading(true);\n    console.log('setLoading(true) called in useEffect [user]');\n    setErrorMsg('');\n    const fetchData = async () => {\n      try {\n        // Get current session to ensure access token is valid\n        const {\n          data: sessionData,\n          error: sessionError\n        } = await supabase.auth.getSession();\n        console.log('Session data:', sessionData);\n        if (sessionError) throw sessionError;\n\n        // Fetch profiles only if user is logged in\n        if (user) {\n          console.log('Attempting to fetch profiles...');\n          const {\n            data: profilesData,\n            error: profilesError\n          } = await supabase.from('profiles').select('*');\n          console.log('Profiles fetch result:', {\n            data: profilesData,\n            error: profilesError\n          });\n          if (profilesError) throw profilesError;\n          setProfiles(profilesData || []);\n          console.log('profilesRes (inside then):', {\n            data: profilesData,\n            error: profilesError\n          });\n\n          // Existing profile debug logs\n          console.log('user.id:', user.id);\n          console.log('profiles:', profilesData);\n          const found = (profilesData || []).find(p => String(p.user_id).trim().toLowerCase() === String(user.id).trim().toLowerCase());\n          console.log('profile found:', found);\n        } else {\n          setProfiles([]); // Clear profiles if no user\n        }\n\n        // Fetch jobs always\n        console.log('Attempting to fetch jobs...');\n        const {\n          data: jobsData,\n          error: jobsError\n        } = await supabase.from('jobs').select('*').order('created_at', {\n          ascending: true\n        }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n        console.log('Jobs fetch result:', {\n          data: jobsData,\n          error: jobsError\n        });\n        if (jobsError) throw jobsError;\n        setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n        console.log('jobsRes (inside then):', {\n          data: jobsData,\n          error: jobsError\n        });\n\n        // Debugging: Log type of job IDs\n        if (jobsData && jobsData.length > 0) {\n          console.log('First job ID and its type:', jobsData[0].id, typeof jobsData[0].id);\n        }\n      } catch (err) {\n        setErrorMsg('เกิดข้อผิดพลาดในการโหลดข้อมูล: ' + err.message);\n        console.error('Fetch error details (inside catch):', err);\n      } finally {\n        setLoading(false);\n        console.log('useEffect: jobs/profiles loaded, setLoading(false)');\n      }\n    };\n    fetchData();\n\n    // เพิ่ม event listener สำหรับ window focus เพื่อโหลดข้อมูลใหม่เมื่อแท็บกลับมาทำงาน\n    window.addEventListener('focus', fetchData);\n\n    // Cleanup function: ลบ event listener เมื่อ component unmount\n    return () => {\n      window.removeEventListener('focus', fetchData);\n    };\n  }, [user]);\n\n  // คำนวณเปอร์เซ็นต์สำเร็จ (ถ้าไม่มีงานเลย ให้แสดง 100%)\n  const totalJobs = jobs.length;\n  const doneCount = jobs.filter(job => job.status === 'เสร็จแล้ว').length;\n  const percent = totalJobs === 0 ? 100 : Math.round(doneCount / totalJobs * 100);\n  const radius = 16;\n  const circumference = 2 * Math.PI * radius;\n  const progress = percent / 100 * circumference;\n\n  // Auth Modal UI (state แยกใน modal)\n  const AuthModal = ({\n    show,\n    mode,\n    onClose,\n    onSwitchMode\n  }) => {\n    _s();\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [rePassword, setRePassword] = useState('');\n    const [userName, setUserName] = useState('');\n    const [authError, setAuthError] = useState('');\n    const [authMsg, setAuthMsg] = useState('');\n    useEffect(() => {\n      setEmail('');\n      setPassword('');\n      setRePassword('');\n      setUserName('');\n      setAuthError('');\n      setAuthMsg('');\n    }, [mode, show]);\n\n    // หลังสมัครสมาชิกสำเร็จ เด้งไปหน้าเข้าสู่ระบบอัตโนมัติ\n    useEffect(() => {\n      if (mode === 'signup' && authMsg) {\n        const timer = setTimeout(() => {\n          onSwitchMode('login');\n        }, 2000);\n        return () => clearTimeout(timer);\n      }\n    }, [authMsg, mode, onSwitchMode]);\n    const handleLogin = async e => {\n      e.preventDefault();\n      setAuthError('');\n      setAuthMsg('');\n      const {\n        error\n      } = await supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      if (error) setAuthError(error.message);else onClose();\n    };\n    const handleSignup = async e => {\n      e.preventDefault();\n      setAuthError('');\n      setAuthMsg('');\n      if (password !== rePassword) {\n        setAuthError('รหัสผ่านไม่ตรงกัน');\n        return;\n      }\n      if (!userName.trim()) {\n        setAuthError('กรุณากรอกชื่อผู้ใช้');\n        return;\n      }\n      const {\n        error\n      } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            user_name: userName\n          }\n        }\n      });\n      if (error) setAuthError(error.message);else setAuthMsg('กรุณาตรวจสอบอีเมลเพื่อยืนยันตัวตน');\n    };\n    const handleReset = async e => {\n      e.preventDefault();\n      setAuthError('');\n      setAuthMsg('');\n      const {\n        error\n      } = await supabase.auth.resetPasswordForEmail(email);\n      if (error) setAuthError(error.message);else setAuthMsg('ส่งลิงก์รีเซ็ตรหัสผ่านไปที่อีเมลแล้ว');\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-backdrop\",\n      style: {\n        display: show ? 'flex' : 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-close\",\n          onClick: onClose,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), mode === 'login' && /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleLogin,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            required: true,\n            autoComplete: \"username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true,\n            autoComplete: \"current-password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-link\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => onSwitchMode('signup'),\n              children: \"\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), \" |\", /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => onSwitchMode('reset'),\n              children: \"\\u0E25\\u0E37\\u0E21\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this), authError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-error\",\n            children: authError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), mode === 'signup' && /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSignup,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: \"\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49 (User name)\",\n            value: userName,\n            onChange: e => setUserName(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            required: true,\n            autoComplete: \"username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true,\n            autoComplete: \"new-password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Confirm Password\",\n            value: rePassword,\n            onChange: e => setRePassword(e.target.value),\n            required: true,\n            autoComplete: \"new-password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"\\u0E2A\\u0E21\\u0E31\\u0E04\\u0E23\\u0E2A\\u0E21\\u0E32\\u0E0A\\u0E34\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-link\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => onSwitchMode('login'),\n              children: \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this), authMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-success\",\n            children: authMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 27\n          }, this), authError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-error\",\n            children: authError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), mode === 'reset' && /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleReset,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0E23\\u0E35\\u0E40\\u0E0B\\u0E47\\u0E15\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            required: true,\n            autoComplete: \"username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"\\u0E2A\\u0E48\\u0E07\\u0E25\\u0E34\\u0E07\\u0E01\\u0E4C\\u0E23\\u0E35\\u0E40\\u0E0B\\u0E47\\u0E15\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-link\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => onSwitchMode('login'),\n              children: \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this), authMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-success\",\n            children: authMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 27\n          }, this), authError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-error\",\n            children: authError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this);\n  };\n\n  // ดึง user_name จาก profiles มาแสดงแทน email (debug ละเอียด)\n  _s(AuthModal, \"PShLQV+jyD8TExK/LKHcUd+miuw=\");\n  const getDisplayName = () => {\n    if (!user) return '';\n    const profile = profiles.find(p => String(p.user_id).trim().toLowerCase() === String(user.id).trim().toLowerCase());\n    // ถ้าไม่พบโปรไฟล์ ให้แสดง email แทน\n    return profile ? profile.username : user.email;\n  };\n\n  // ฟังก์ชัน map user_id เป็น username\n  const getUsernameById = userId => {\n    const profile = profiles.find(p => String(p.user_id).trim().toLowerCase() === String(userId).trim().toLowerCase());\n    // หา user จาก auth ถ้าไม่มี profile\n    if (profile) return profile.username;\n    if (user && String(user.id).trim().toLowerCase() === String(userId).trim().toLowerCase()) return user.email;\n    return '-';\n  };\n  const formatDateToYYMMDD = dateString => {\n    if (!dateString) return '-';\n    const [year, month, day] = dateString.split('-');\n    return `${year.slice(2)}/${month}/${day}`;\n  };\n\n  // ฟังก์ชันจัดเรียงงานตามความสำคัญ\n  const sortJobs = jobsArray => {\n    return [...jobsArray].sort((a, b) => {\n      const isACompleted = a.status === 'เสร็จแล้ว';\n      const isBCompleted = b.status === 'เสร็จแล้ว';\n\n      // 1. งานที่ยังไม่เสร็จสิ้น จะอยู่ก่อนงานที่เสร็จสิ้นแล้ว\n      if (isACompleted && !isBCompleted) return 1;\n      if (!isACompleted && isBCompleted) return -1;\n\n      // ถ้าสถานะเหมือนกัน (ทั้งคู่เสร็จแล้ว หรือทั้งคู่ยังไม่เสร็จ)\n      if (!isACompleted && !isBCompleted) {\n        // ทั้งคู่ยังไม่เสร็จ\n        // เรียงตาม due_date (น้อยไปมาก, null อยู่ท้าย)\n        const dateA = a.due_date ? new Date(a.due_date) : new Date('9999-12-31'); // กำหนดวันที่ไกลมากสำหรับ null\n        const dateB = b.due_date ? new Date(b.due_date) : new Date('9999-12-31');\n        if (dateA < dateB) return -1;\n        if (dateA > dateB) return 1;\n\n        // ถ้า due_date เท่ากัน หรือทั้งคู่ไม่มี ให้เรียงตาม assigned_date (น้อยไปมาก)\n        const assignedAtA = new Date(a.assigned_date);\n        const assignedAtB = new Date(b.assigned_date);\n        if (assignedAtA < assignedAtB) return -1;\n        if (assignedAtA > assignedAtB) return 1;\n      } else if (isACompleted && isBCompleted) {\n        // ทั้งคู่เสร็จแล้ว\n        // เรียงตาม completed_date (มากไปน้อย - ล่าสุดก่อน, null อยู่ท้าย)\n        const completedAtA = a.completed_date ? new Date(a.completed_date) : new Date('0000-01-01'); // กำหนดวันที่อดีตมากสำหรับ null\n        const completedAtB = b.completed_date ? new Date(b.completed_date) : new Date('0000-01-01');\n        if (completedAtA > completedAtB) return -1;\n        if (completedAtA < completedAtB) return 1;\n\n        // ถ้า completed_date เท่ากัน หรือทั้งคู่ไม่มี ให้เรียงตาม assigned_date (น้อยไปมาก)\n        const assignedAtA = new Date(a.assigned_date);\n        const assignedAtB = new Date(b.assigned_date);\n        if (assignedAtA < assignedAtB) return -1;\n        if (assignedAtA > assignedAtB) return 1;\n      }\n      return 0;\n    });\n  };\n\n  // ฟังก์ชันลบงาน\n  const handleDeleteJob = async id => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบ');\n      return;\n    }\n    console.log('พยายามลบงาน id:', id);\n    const {\n      error\n    } = await supabase.from('jobs').delete().eq('id', id); // แก้ไขกลับ ไม่ต้องแปลงเป็น string\n    if (!error) {\n      const {\n        data: jobsData,\n        error: jobsError\n      } = await supabase.from('jobs').select('*').order('created_at', {\n        ascending: true\n      }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n      if (!jobsError) {\n        setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n      } else {\n        alert('เกิดข้อผิดพลาดในการโหลดงานใหม่: ' + jobsError.message);\n        console.error('Reload jobs error:', jobsError);\n      }\n    } else {\n      alert('เกิดข้อผิดพลาดในการลบงาน: ' + error.message);\n      console.error('Delete job error:', error);\n    }\n  };\n\n  // ฟังก์ชันเพิ่มงาน\n  const handleAddJob = async () => {\n    if (!user) return;\n    const newJobTitle = newJob.trim();\n    const newJobAssignee = newAssignedTo.trim();\n    const newJobDueDate = newDueDate.trim();\n    if (newJobTitle) {\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.from('jobs').insert({\n        title: newJobTitle,\n        assigned_to: newJobAssignee,\n        user_id: user.id,\n        assigned_date: new Date().toISOString().slice(0, 10),\n        status: 'ดำเนินการอยู่',\n        due_date: newJobDueDate || null\n      }).select();\n      if (!error) {\n        console.log('Job added successfully:', data);\n        // ดึงงานทั้งหมดมาใหม่พร้อมจัดเรียงด้วย sortJobs\n        const {\n          data: jobsData,\n          error: jobsError\n        } = await supabase.from('jobs').select('*').order('created_at', {\n          ascending: true\n        }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n        if (!jobsError) {\n          setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n        } else {\n          alert('เกิดข้อผิดพลาดในการโหลดงานใหม่: ' + jobsError.message);\n        }\n        setNewJob('');\n        setNewAssignedTo('');\n        setNewDueDate(''); // เคลียร์ค่าวันที่คาดว่าจะเสร็จ\n      } else {\n        alert('เกิดข้อผิดพลาดในการเพิ่มงาน: ' + error.message);\n        console.error('Error adding job:', error);\n      }\n      setLoading(false); // ปิด loading หลังจากเสร็จสิ้น\n    }\n  };\n\n  // ฟังก์ชันสำหรับเปลี่ยนสถานะ\n  const handleStatusChange = async (jobId, newStatus, completedDate) => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบเพื่อเปลี่ยนสถานะ');\n      return;\n    }\n    console.log(`Attempting to update job ${jobId} to status: ${newStatus}, completed_date: ${completedDate}`);\n    const {\n      data: updatedJob,\n      error\n    } = await supabase.from('jobs').update({\n      status: newStatus,\n      completed_date: completedDate\n    }).eq('id', jobId) // แก้ไขกลับ ไม่ต้องแปลงเป็น string\n    .select(); // เพิ่ม .select() ที่นี่เพื่อให้ได้ข้อมูลที่อัปเดตกลับมา\n\n    if (error) {\n      console.error('Error updating status to Supabase:', error);\n      alert('เกิดข้อผิดพลาดในการเปลี่ยนสถานะ: ' + error.message);\n      return; // Exit if update fails\n    }\n    console.log(`Supabase update successful for job ${jobId}. Data:`, updatedJob);\n    if (newStatus === 'เสร็จแล้ว') {\n      // อัปเดตสถานะใน local state ก่อนเพื่อเริ่ม Animation\n      setJobs(jobs.map(j => j.id === jobId ? {\n        ...j,\n        status: newStatus,\n        completed_date: completedDate\n      } : j));\n      setAnimatingJobId(jobId); // เริ่ม Animation fade-out\n\n      // ส่งการอัปเดตไปยัง Supabase (ไม่ต้องรอผล) \n      // ไม่ต้อง await ตรงนี้ เพื่อไม่ให้ block UI และให้ Animation ทำงานก่อน\n      // โค้ดส่วนนี้ถูกลบออก เนื่องจากมีการอัปเดตสถานะไปแล้วที่ด้านบน (บรรทัด 389-392)\n      // supabase\n      //   .from('jobs')\n      //   .update({ status: newStatus, completed_date: completedDate })\n      //   .eq('id', jobId);\n\n      setTimeout(async () => {\n        if (updatedJob && updatedJob.length > 0) {\n          // ใช้ข้อมูลที่อัปเดตแล้วจาก Supabase โดยตรง ไม่ต้อง re-fetch ทั้งหมด\n          const newJobsState = jobs.map(j => j.id === updatedJob[0].id ? updatedJob[0] : j);\n          setJobs(sortJobs(newJobsState) || []); // ใช้ sortJobs ตรงนี้\n          console.log('Jobs state updated for \"เสร็จแล้ว\" status with updated job data.');\n\n          // เลื่อนไปยัง job ที่เสร็จแล้วหลังจากโหลดและจัดเรียงใหม่\n          if (jobRefs.current[jobId]) {\n            jobRefs.current[jobId].scrollIntoView({\n              behavior: 'smooth',\n              block: 'end'\n            });\n          }\n        } else {\n          // Fallback: If updatedJob is null/empty (shouldn't happen with .select()), re-fetch\n          console.warn('Updated job data was null or empty after .select(). Re-fetching all jobs.');\n          const {\n            data: jobsData,\n            error: jobsError\n          } = await supabase.from('jobs').select('*').order('created_at', {\n            ascending: true\n          });\n          if (!jobsError) {\n            setJobs(sortJobs(jobsData) || []);\n            console.log('Jobs state updated for \"เสร็จแล้ว\" status with sorted data (full reload).');\n            if (jobRefs.current[jobId]) {\n              jobRefs.current[jobId].scrollIntoView({\n                behavior: 'smooth',\n                block: 'end'\n              });\n            }\n          } else {\n            alert('เกิดข้อผิดพลาดในการโหลดงานใหม่หลังจากเปลี่ยนสถานะ (หลัง Animation): ' + jobsError.message);\n            console.error('Error fetching jobs after status update (post-animation):', jobsError);\n          }\n        }\n        setAnimatingJobId(null); // ลบ animatingJobId ออกเมื่อ Animation เสร็จสิ้น\n      }, 500); // หน่วงเวลา 500ms ให้ตรงกับ CSS transition\n    } else {\n      // หากเปลี่ยนสถานะอื่นที่ไม่ใช่ 'เสร็จแล้ว' ให้รีโหลดและจัดเรียงทันที\n      // และยังคงส่งอัปเดตไป Supabase โดยไม่ใช้ setTimeout\n      // ไม่ต้องอัปเดตซ้ำ เพราะได้ await ด้านบนแล้ว\n\n      // ใช้ updatedJob ที่ได้จาก Supabase มาอัปเดต local state โดยตรง\n      if (updatedJob && updatedJob.length > 0) {\n        setJobs(sortJobs(jobs.map(j => j.id === updatedJob[0].id ? updatedJob[0] : j)) || []);\n        console.log('Jobs state updated for non-\"เสร็จแล้ว\" status with updated job data.');\n      } else {\n        // หากไม่มีข้อมูลจาก updatedJob (เช่น update ไม่พบ id) ให้ reload ทั้งหมด\n        console.log('Fetching all jobs because updatedJob was empty or null for non-\"เสร็จแล้ว\" status update...');\n        const {\n          data: jobsData,\n          error: jobsError\n        } = await supabase.from('jobs').select('*').order('created_at', {\n          ascending: true\n        });\n        if (!jobsError) {\n          setJobs(sortJobs(jobsData) || []);\n          console.log('Jobs state updated for non-\"เสร็จแล้ว\" status with sorted data (full reload).');\n        } else {\n          alert('เกิดข้อผิดพลาดในการโหลดงานใหม่หลังจากเปลี่ยนสถานะ: ' + jobsError.message);\n          console.error('Error fetching jobs after status update:', jobsError);\n        }\n      }\n    }\n  };\n  const handleLogout = async () => {\n    const {\n      error\n    } = await supabase.auth.signOut();\n    if (error) {\n      console.error('Logout error:', error);\n      alert('เกิดข้อผิดพลาดในการออกจากระบบ: ' + error.message);\n    } else {\n      setUser(null);\n      setJobs([]);\n      setProfiles([]);\n      setLoading(false);\n      console.log('Logged out successfully.');\n    }\n  };\n  const handleEditRemark = (jobId, currentRemark) => {\n    setEditingRemarkId(jobId);\n    setNewRemark(currentRemark || ''); // กำหนดค่า input ด้วยข้อความเดิม\n  };\n  const handleSaveRemark = async (jobId, newRemarkContent) => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบก่อนบันทึก Remark');\n      return;\n    }\n    setLoading(true);\n    const {\n      data: updatedJob,\n      error\n    } = await supabase.from('jobs').update({\n      remark: newRemarkContent\n    }).eq('id', jobId).select();\n    setLoading(false);\n    if (!error) {\n      // หลังจากบันทึก Remark สำเร็จ ให้ดึงงานทั้งหมดมาใหม่แล้วจัดเรียง\n      const {\n        data: jobsData,\n        error: jobsError\n      } = await supabase.from('jobs').select('*').order('created_at', {\n        ascending: true\n      }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n      if (!jobsError) {\n        setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n      } else {\n        alert('เกิดข้อผิดพลาดในการโหลดงานใหม่หลังจากบันทึก Remark: ' + jobsError.message);\n        console.error('Error fetching jobs after remark update:', jobsError);\n      }\n      setEditingRemarkId(null);\n      setNewRemark('');\n    } else {\n      alert('เกิดข้อผิดพลาดในการบันทึก Remark: ' + error.message);\n      console.error('Error saving remark:', error);\n    }\n  };\n  const handleExport = () => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบก่อนส่งออกข้อมูล');\n      return;\n    }\n    alert('ฟังก์ชันส่งออกข้อมูลยังไม่พร้อมใช้งาน');\n    console.log('Export functionality not yet implemented.');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        alignItems: 'center',\n        marginBottom: 10\n      },\n      children: user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginRight: 8\n          },\n          children: [\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A: \", getDisplayName()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setShowAuthModal(true);\n          setAuthMode('login');\n        },\n        children: \"\\u0E25\\u0E47\\u0E2D\\u0E01\\u0E2D\\u0E34\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 7\n    }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        textAlign: 'center'\n      },\n      children: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(AuthModal, {\n      show: showAuthModal,\n      mode: authMode,\n      onClose: () => setShowAuthModal(false),\n      onSwitchMode: setAuthMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Coilmaster Electronics - Weekly Job Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-job\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        // เปลี่ยนจาก input เป็น textarea\n        rows: \"3\" // กำหนดความสูงเริ่มต้น\n        ,\n        placeholder: \"\\u0E2B\\u0E31\\u0E27\\u0E02\\u0E49\\u0E2D\\u0E43\\u0E2B\\u0E21\\u0E48\" // ย้าย placeholder มาที่นี่\n        ,\n        value: newJob,\n        onChange: e => setNewJob(e.target.value),\n        disabled: !user,\n        style: {\n          width: '100%',\n          minHeight: '60px',\n          boxSizing: 'border-box',\n          resize: 'vertical'\n        } // เพิ่ม style\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u0E1C\\u0E39\\u0E49\\u0E23\\u0E31\\u0E1A\\u0E1C\\u0E34\\u0E14\\u0E0A\\u0E2D\\u0E1A\",\n        value: newAssignedTo,\n        onChange: e => setNewAssignedTo(e.target.value),\n        disabled: !user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        value: newDueDate,\n        onChange: e => setNewDueDate(e.target.value),\n        placeholder: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E04\\u0E23\\u0E1A\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\",\n        disabled: !user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAddJob,\n        disabled: !user,\n        children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2B\\u0E31\\u0E27\\u0E02\\u0E49\\u0E2D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleExport,\n        disabled: !user,\n        style: {\n          marginLeft: '10px'\n        },\n        children: \"\\u0E2A\\u0E48\\u0E07\\u0E2D\\u0E2D\\u0E01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading jobs...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        overflowX: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"job-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"colgroup\", {\n          children: [/*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '5%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '23%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '10%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '10%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '10%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '10%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '15%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '10%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: '9%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E40\\u0E19\\u0E37\\u0E49\\u0E2D\\u0E2B\\u0E32\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E23\\u0E31\\u0E1A\\u0E1C\\u0E34\\u0E14\\u0E0A\\u0E2D\\u0E1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E44\\u0E14\\u0E49\\u0E23\\u0E31\\u0E1A\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E04\\u0E32\\u0E14\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E40\\u0E2A\\u0E23\\u0E47\\u0E08\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0E14\\u0E33\\u0E40\\u0E19\\u0E34\\u0E19\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: jobs.map((job, index) => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: job.id === animatingJobId && job.status === 'เสร็จแล้ว' ? 'job-completed-fade-out' : '',\n              ref: el => jobRefs.current[job.id] = el // กำหนด ref ให้กับแต่ละแถว\n              ,\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                dangerouslySetInnerHTML: {\n                  __html: job.title.replace(/\\n/g, '<br/>')\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: job.assigned_to || '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatDateToYYMMDD(job.assigned_date)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatDateToYYMMDD(job.due_date)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatDateToYYMMDD(job.completed_date)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  color: job.remark ? '#333' : '#aaa'\n                },\n                children: editingRemarkId === job.id ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  rows: \"3\",\n                  value: newRemark,\n                  onChange: e => setNewRemark(e.target.value),\n                  onBlur: () => handleSaveRemark(job.id, newRemark),\n                  autoFocus: true,\n                  style: {\n                    width: '100%',\n                    minHeight: '60px',\n                    boxSizing: 'border-box'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 630,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  onClick: () => handleEditRemark(job.id, job.remark),\n                  dangerouslySetInnerHTML: {\n                    __html: (job.remark || 'Add').replace(/\\n/g, '<br/>')\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: job.status,\n                  onChange: e => {\n                    const newStatus = e.target.value;\n                    const newCompletedDate = newStatus === 'เสร็จแล้ว' ? new Date().toISOString().split('T')[0] : null;\n                    handleStatusChange(job.id, newStatus, newCompletedDate);\n                  },\n                  disabled: !user,\n                  className: !user ? 'disabled-select' : '',\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\\u0E14\\u0E33\\u0E40\\u0E19\\u0E34\\u0E19\\u0E01\\u0E32\\u0E23\\u0E2D\\u0E22\\u0E39\\u0E48\",\n                    children: \"\\u0E14\\u0E33\\u0E40\\u0E19\\u0E34\\u0E19\\u0E01\\u0E32\\u0E23\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 656,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\\u0E23\\u0E2D\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\",\n                    children: \"\\u0E23\\u0E2D\\u0E2D\\u0E19\\u0E38\\u0E21\\u0E31\\u0E15\\u0E34\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 657,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\\u0E40\\u0E25\\u0E37\\u0E48\\u0E2D\\u0E19\",\n                    children: \"\\u0E40\\u0E25\\u0E37\\u0E48\\u0E2D\\u0E19\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 658,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\\u0E40\\u0E2A\\u0E23\\u0E47\\u0E08\\u0E41\\u0E25\\u0E49\\u0E27\",\n                    children: \"\\u0E40\\u0E2A\\u0E23\\u0E47\\u0E08\\u0E41\\u0E25\\u0E49\\u0E27\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 659,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: job.status === 'เสร็จแล้ว' ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"button-delete\",\n                  onClick: () => handleDeleteJob(job.id),\n                  children: \"\\u0E25\\u0E1A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"button-on-process\",\n                  disabled: true,\n                  children: \"On process\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 668,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 19\n              }, this)]\n            }, job.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pie-chart\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"200\",\n        height: \"200\",\n        viewBox: \"0 0 40 40\",\n        children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n          r: \"16\",\n          cx: \"20\",\n          cy: \"20\",\n          fill: \"#eee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n          r: \"16\",\n          cx: \"20\",\n          cy: \"20\",\n          fill: \"transparent\",\n          stroke: \"#4caf50\",\n          strokeWidth: \"4\",\n          strokeDasharray: circumference,\n          strokeDashoffset: circumference - progress,\n          strokeLinecap: \"round\",\n          style: {\n            transition: 'stroke-dashoffset 0.5s'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n          x: \"20\",\n          y: \"24\",\n          textAnchor: \"middle\",\n          fontSize: \"8\",\n          fill: \"#333\",\n          children: [percent, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u0E07\\u0E32\\u0E19\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08 \", doneCount, \" \\u0E08\\u0E32\\u0E01 \", jobs.length, \" \\u0E2B\\u0E31\\u0E27\\u0E02\\u0E49\\u0E2D\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 545,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"jNynaFvvrkLbSogN0G70dBE4nYI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","supabase","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s2","_s","$RefreshSig$","jobs","setJobs","profiles","setProfiles","newJob","setNewJob","newAssignedTo","setNewAssignedTo","newDueDate","setNewDueDate","newRemark","setNewRemark","loading","setLoading","user","setUser","showAuthModal","setShowAuthModal","authMode","setAuthMode","errorMsg","setErrorMsg","editingRemarkId","setEditingRemarkId","animatingJobId","setAnimatingJobId","jobRefs","auth","getUser","then","data","error","Object","keys","localStorage","filter","k","startsWith","forEach","removeItem","onAuthStateChange","_event","session","_session$user$user_me","profile","from","select","eq","id","single","user_metadata","user_name","insert","user_id","username","newProfiles","console","log","fetchData","sessionData","sessionError","getSession","profilesData","profilesError","found","find","p","String","trim","toLowerCase","jobsData","jobsError","order","ascending","sortJobs","length","err","message","window","addEventListener","removeEventListener","totalJobs","doneCount","job","status","percent","Math","round","radius","circumference","PI","progress","AuthModal","show","mode","onClose","onSwitchMode","email","setEmail","password","setPassword","rePassword","setRePassword","userName","setUserName","authError","setAuthError","authMsg","setAuthMsg","timer","setTimeout","clearTimeout","handleLogin","e","preventDefault","signInWithPassword","handleSignup","signUp","options","handleReset","resetPasswordForEmail","className","style","display","children","onClick","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","autoComplete","textAlign","getDisplayName","getUsernameById","userId","formatDateToYYMMDD","dateString","year","month","day","split","slice","jobsArray","sort","a","b","isACompleted","isBCompleted","dateA","due_date","Date","dateB","assignedAtA","assigned_date","assignedAtB","completedAtA","completed_date","completedAtB","handleDeleteJob","alert","delete","handleAddJob","newJobTitle","newJobAssignee","newJobDueDate","title","assigned_to","toISOString","handleStatusChange","jobId","newStatus","completedDate","updatedJob","update","map","j","newJobsState","current","scrollIntoView","behavior","block","warn","handleLogout","signOut","handleEditRemark","currentRemark","handleSaveRemark","newRemarkContent","remark","handleExport","justifyContent","alignItems","marginBottom","marginRight","color","rows","disabled","width","minHeight","boxSizing","resize","marginLeft","overflowX","index","ref","el","dangerouslySetInnerHTML","__html","replace","onBlur","autoFocus","newCompletedDate","height","viewBox","r","cx","cy","fill","stroke","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","transition","x","y","textAnchor","fontSize","_c","$RefreshReg$"],"sources":["D:/DVweekly/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\nimport { supabase } from './supabaseClient';\n// import { TransitionGroup } from 'react-transition-group'; // ลบบรรทัดนี้ออก หรือคอมเมนต์ไว้\n\nfunction App() {\n  const [jobs, setJobs] = useState([]);\n  const [profiles, setProfiles] = useState([]);\n  const [newJob, setNewJob] = useState('');\n  const [newAssignedTo, setNewAssignedTo] = useState('');\n  const [newDueDate, setNewDueDate] = useState('');\n  const [newRemark, setNewRemark] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [authMode, setAuthMode] = useState('login'); // login | signup | reset\n  const [errorMsg, setErrorMsg] = useState('');\n  const [editingRemarkId, setEditingRemarkId] = useState(null);\n  const [animatingJobId, setAnimatingJobId] = useState(null); // State สำหรับควบคุม Animation\n  const jobRefs = useRef({}); // สร้าง ref สำหรับเก็บ DOM element ของแต่ละงาน\n\n  // โหลด user ปัจจุบัน\n  useEffect(() => {\n    supabase.auth.getUser().then(({ data, error }) => {\n      if (error || !data.user) {\n        setUser(null);\n        // ลบ localStorage ที่เกี่ยวกับ supabase\n        Object.keys(localStorage)\n          .filter((k) => k.startsWith('sb-'))\n          .forEach((k) => localStorage.removeItem(k));\n      } else {\n        setUser(data.user);\n      }\n      setLoading(false);\n    });\n    supabase.auth.onAuthStateChange(async (_event, session) => {\n      setUser(session?.user || null);\n      setJobs([]);\n      setProfiles([]);\n      setLoading(false);\n      // ถ้า login สำเร็จและยังไม่มี profile ให้ insert profile\n      if (session?.user) {\n        const { data: profile } = await supabase\n          .from('profiles')\n          .select('*')\n          .eq('user_id', session.user.id)\n          .single();\n        if (!profile && session.user.user_metadata?.user_name) {\n          await supabase.from('profiles').insert([\n            { user_id: session.user.id, username: session.user.user_metadata.user_name }\n          ]);\n        }\n      }\n      // force reload profiles ทุกครั้งหลัง login/logout\n      const { data: newProfiles } = await supabase.from('profiles').select('*');\n      setProfiles(newProfiles || []);\n    });\n  }, []);\n\n  // โหลด jobs และ profiles จาก Supabase ทุกครั้งที่ user เปลี่ยน\n  useEffect(() => {\n    console.log('useEffect [user] called, user:', user);\n    setLoading(true);\n    console.log('setLoading(true) called in useEffect [user]');\n    setErrorMsg('');\n\n    const fetchData = async () => {\n      try {\n        // Get current session to ensure access token is valid\n        const { data: sessionData, error: sessionError } = await supabase.auth.getSession();\n        console.log('Session data:', sessionData);\n        if (sessionError) throw sessionError;\n\n        // Fetch profiles only if user is logged in\n        if (user) {\n          console.log('Attempting to fetch profiles...');\n          const { data: profilesData, error: profilesError } = await supabase.from('profiles').select('*');\n          console.log('Profiles fetch result:', { data: profilesData, error: profilesError });\n          if (profilesError) throw profilesError;\n          setProfiles(profilesData || []);\n          console.log('profilesRes (inside then):', { data: profilesData, error: profilesError });\n\n          // Existing profile debug logs\n          console.log('user.id:', user.id);\n          console.log('profiles:', profilesData);\n          const found = (profilesData || []).find(\n            (p) => String(p.user_id).trim().toLowerCase() === String(user.id).trim().toLowerCase()\n          );\n          console.log('profile found:', found);\n        } else {\n          setProfiles([]); // Clear profiles if no user\n        }\n\n        // Fetch jobs always\n        console.log('Attempting to fetch jobs...');\n        const { data: jobsData, error: jobsError } = await supabase.from('jobs')\n          .select('*')\n          .order('created_at', { ascending: true }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n        console.log('Jobs fetch result:', { data: jobsData, error: jobsError });\n        if (jobsError) throw jobsError;\n        setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n        console.log('jobsRes (inside then):', { data: jobsData, error: jobsError });\n\n        // Debugging: Log type of job IDs\n        if (jobsData && jobsData.length > 0) {\n          console.log('First job ID and its type:', jobsData[0].id, typeof jobsData[0].id);\n        }\n\n      } catch (err) {\n        setErrorMsg('เกิดข้อผิดพลาดในการโหลดข้อมูล: ' + err.message);\n        console.error('Fetch error details (inside catch):', err);\n      } finally {\n        setLoading(false);\n        console.log('useEffect: jobs/profiles loaded, setLoading(false)');\n      }\n    };\n\n    fetchData();\n\n    // เพิ่ม event listener สำหรับ window focus เพื่อโหลดข้อมูลใหม่เมื่อแท็บกลับมาทำงาน\n    window.addEventListener('focus', fetchData);\n\n    // Cleanup function: ลบ event listener เมื่อ component unmount\n    return () => {\n      window.removeEventListener('focus', fetchData);\n    };\n  }, [user]);\n\n  // คำนวณเปอร์เซ็นต์สำเร็จ (ถ้าไม่มีงานเลย ให้แสดง 100%)\n  const totalJobs = jobs.length;\n  const doneCount = jobs.filter(job => job.status === 'เสร็จแล้ว').length;\n  const percent = totalJobs === 0 ? 100 : Math.round((doneCount / totalJobs) * 100);\n  const radius = 16;\n  const circumference = 2 * Math.PI * radius;\n  const progress = (percent / 100) * circumference;\n\n  // Auth Modal UI (state แยกใน modal)\n  const AuthModal = ({ show, mode, onClose, onSwitchMode }) => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [rePassword, setRePassword] = useState('');\n    const [userName, setUserName] = useState('');\n    const [authError, setAuthError] = useState('');\n    const [authMsg, setAuthMsg] = useState('');\n\n    useEffect(() => {\n      setEmail('');\n      setPassword('');\n      setRePassword('');\n      setUserName('');\n      setAuthError('');\n      setAuthMsg('');\n    }, [mode, show]);\n\n    // หลังสมัครสมาชิกสำเร็จ เด้งไปหน้าเข้าสู่ระบบอัตโนมัติ\n    useEffect(() => {\n      if (mode === 'signup' && authMsg) {\n        const timer = setTimeout(() => {\n          onSwitchMode('login');\n        }, 2000);\n        return () => clearTimeout(timer);\n      }\n    }, [authMsg, mode, onSwitchMode]);\n\n    const handleLogin = async (e) => {\n      e.preventDefault();\n      setAuthError(''); setAuthMsg('');\n      const { error } = await supabase.auth.signInWithPassword({ email, password });\n      if (error) setAuthError(error.message);\n      else onClose();\n    };\n    const handleSignup = async (e) => {\n      e.preventDefault();\n      setAuthError(''); setAuthMsg('');\n      if (password !== rePassword) {\n        setAuthError('รหัสผ่านไม่ตรงกัน');\n        return;\n      }\n      if (!userName.trim()) {\n        setAuthError('กรุณากรอกชื่อผู้ใช้');\n        return;\n      }\n      const { error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: { user_name: userName }\n        }\n      });\n      if (error) setAuthError(error.message);\n      else setAuthMsg('กรุณาตรวจสอบอีเมลเพื่อยืนยันตัวตน');\n    };\n    const handleReset = async (e) => {\n      e.preventDefault();\n      setAuthError(''); setAuthMsg('');\n      const { error } = await supabase.auth.resetPasswordForEmail(email);\n      if (error) setAuthError(error.message);\n      else setAuthMsg('ส่งลิงก์รีเซ็ตรหัสผ่านไปที่อีเมลแล้ว');\n    };\n\n    return (\n      <div\n        className=\"modal-backdrop\"\n        style={{ display: show ? 'flex' : 'none' }}\n      >\n        <div className=\"modal\" onClick={e => e.stopPropagation()}>\n          <button className=\"modal-close\" onClick={onClose}>×</button>\n          {mode === 'login' && (\n            <form onSubmit={handleLogin}>\n              <h2>เข้าสู่ระบบ</h2>\n              <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required autoComplete=\"username\" />\n              <input type=\"password\" placeholder=\"Password\" value={password} onChange={e => setPassword(e.target.value)} required autoComplete=\"current-password\" />\n              <button type=\"submit\">เข้าสู่ระบบ</button>\n              <div className=\"modal-link\">\n                <span onClick={() => onSwitchMode('signup')}>สมัครสมาชิก</span> |\n                <span onClick={() => onSwitchMode('reset')}>ลืมรหัสผ่าน?</span>\n              </div>\n              {authError && <div className=\"modal-error\">{authError}</div>}\n            </form>\n          )}\n          {mode === 'signup' && (\n            <form onSubmit={handleSignup}>\n              <h2 style={{ textAlign: 'center' }}>สมัครสมาชิก</h2>\n              <input type=\"text\" placeholder=\"ชื่อผู้ใช้ (User name)\" value={userName} onChange={e => setUserName(e.target.value)} required />\n              <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required autoComplete=\"username\" />\n              <input type=\"password\" placeholder=\"Password\" value={password} onChange={e => setPassword(e.target.value)} required autoComplete=\"new-password\" />\n              <input type=\"password\" placeholder=\"Confirm Password\" value={rePassword} onChange={e => setRePassword(e.target.value)} required autoComplete=\"new-password\" />\n              <button type=\"submit\">สมัครสมาชิก</button>\n              <div className=\"modal-link\">\n                <span onClick={() => onSwitchMode('login')}>เข้าสู่ระบบ</span>\n              </div>\n              {authMsg && <div className=\"modal-success\">{authMsg}</div>}\n              {authError && <div className=\"modal-error\">{authError}</div>}\n            </form>\n          )}\n          {mode === 'reset' && (\n            <form onSubmit={handleReset}>\n              <h2>รีเซ็ตรหัสผ่าน</h2>\n              <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required autoComplete=\"username\" />\n              <button type=\"submit\">ส่งลิงก์รีเซ็ตรหัสผ่าน</button>\n              <div className=\"modal-link\">\n                <span onClick={() => onSwitchMode('login')}>เข้าสู่ระบบ</span>\n              </div>\n              {authMsg && <div className=\"modal-success\">{authMsg}</div>}\n              {authError && <div className=\"modal-error\">{authError}</div>}\n            </form>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // ดึง user_name จาก profiles มาแสดงแทน email (debug ละเอียด)\n  const getDisplayName = () => {\n    if (!user) return '';\n    const profile = profiles.find((p) => String(p.user_id).trim().toLowerCase() === String(user.id).trim().toLowerCase());\n    // ถ้าไม่พบโปรไฟล์ ให้แสดง email แทน\n    return profile ? profile.username : user.email;\n  };\n\n  // ฟังก์ชัน map user_id เป็น username\n  const getUsernameById = (userId) => {\n    const profile = profiles.find((p) => String(p.user_id).trim().toLowerCase() === String(userId).trim().toLowerCase());\n    // หา user จาก auth ถ้าไม่มี profile\n    if (profile) return profile.username;\n    if (user && String(user.id).trim().toLowerCase() === String(userId).trim().toLowerCase()) return user.email;\n    return '-';\n  };\n\n  const formatDateToYYMMDD = (dateString) => {\n    if (!dateString) return '-';\n    const [year, month, day] = dateString.split('-');\n    return `${year.slice(2)}/${month}/${day}`;\n  };\n\n  // ฟังก์ชันจัดเรียงงานตามความสำคัญ\n  const sortJobs = (jobsArray) => {\n    return [...jobsArray].sort((a, b) => {\n      const isACompleted = a.status === 'เสร็จแล้ว';\n      const isBCompleted = b.status === 'เสร็จแล้ว';\n\n      // 1. งานที่ยังไม่เสร็จสิ้น จะอยู่ก่อนงานที่เสร็จสิ้นแล้ว\n      if (isACompleted && !isBCompleted) return 1;\n      if (!isACompleted && isBCompleted) return -1;\n\n      // ถ้าสถานะเหมือนกัน (ทั้งคู่เสร็จแล้ว หรือทั้งคู่ยังไม่เสร็จ)\n      if (!isACompleted && !isBCompleted) { // ทั้งคู่ยังไม่เสร็จ\n        // เรียงตาม due_date (น้อยไปมาก, null อยู่ท้าย)\n        const dateA = a.due_date ? new Date(a.due_date) : new Date('9999-12-31'); // กำหนดวันที่ไกลมากสำหรับ null\n        const dateB = b.due_date ? new Date(b.due_date) : new Date('9999-12-31');\n\n        if (dateA < dateB) return -1;\n        if (dateA > dateB) return 1;\n\n        // ถ้า due_date เท่ากัน หรือทั้งคู่ไม่มี ให้เรียงตาม assigned_date (น้อยไปมาก)\n        const assignedAtA = new Date(a.assigned_date);\n        const assignedAtB = new Date(b.assigned_date);\n        if (assignedAtA < assignedAtB) return -1;\n        if (assignedAtA > assignedAtB) return 1;\n\n      } else if (isACompleted && isBCompleted) { // ทั้งคู่เสร็จแล้ว\n        // เรียงตาม completed_date (มากไปน้อย - ล่าสุดก่อน, null อยู่ท้าย)\n        const completedAtA = a.completed_date ? new Date(a.completed_date) : new Date('0000-01-01'); // กำหนดวันที่อดีตมากสำหรับ null\n        const completedAtB = b.completed_date ? new Date(b.completed_date) : new Date('0000-01-01');\n\n        if (completedAtA > completedAtB) return -1;\n        if (completedAtA < completedAtB) return 1;\n\n        // ถ้า completed_date เท่ากัน หรือทั้งคู่ไม่มี ให้เรียงตาม assigned_date (น้อยไปมาก)\n        const assignedAtA = new Date(a.assigned_date);\n        const assignedAtB = new Date(b.assigned_date);\n        if (assignedAtA < assignedAtB) return -1;\n        if (assignedAtA > assignedAtB) return 1;\n      }\n      return 0;\n    });\n  };\n\n  // ฟังก์ชันลบงาน\n  const handleDeleteJob = async (id) => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบ');\n      return;\n    }\n    console.log('พยายามลบงาน id:', id);\n    const { error } = await supabase.from('jobs').delete().eq('id', id); // แก้ไขกลับ ไม่ต้องแปลงเป็น string\n    if (!error) {\n      const { data: jobsData, error: jobsError } = await supabase.from('jobs')\n        .select('*')\n        .order('created_at', { ascending: true }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n      if (!jobsError) {\n        setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n      } else {\n        alert('เกิดข้อผิดพลาดในการโหลดงานใหม่: ' + jobsError.message);\n        console.error('Reload jobs error:', jobsError);\n      }\n    } else {\n      alert('เกิดข้อผิดพลาดในการลบงาน: ' + error.message);\n      console.error('Delete job error:', error);\n    }\n  };\n\n  // ฟังก์ชันเพิ่มงาน\n  const handleAddJob = async () => {\n    if (!user) return;\n\n    const newJobTitle = newJob.trim();\n    const newJobAssignee = newAssignedTo.trim();\n    const newJobDueDate = newDueDate.trim();\n\n    if (newJobTitle) {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from('jobs')\n        .insert({\n          title: newJobTitle,\n          assigned_to: newJobAssignee,\n          user_id: user.id,\n          assigned_date: new Date().toISOString().slice(0, 10),\n          status: 'ดำเนินการอยู่',\n          due_date: newJobDueDate || null,\n        })\n        .select();\n\n      if (!error) {\n        console.log('Job added successfully:', data);\n        // ดึงงานทั้งหมดมาใหม่พร้อมจัดเรียงด้วย sortJobs\n        const { data: jobsData, error: jobsError } = await supabase.from('jobs')\n          .select('*')\n          .order('created_at', { ascending: true }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n        if (!jobsError) {\n          setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n        } else {\n          alert('เกิดข้อผิดพลาดในการโหลดงานใหม่: ' + jobsError.message);\n        }\n        setNewJob('');\n        setNewAssignedTo('');\n        setNewDueDate(''); // เคลียร์ค่าวันที่คาดว่าจะเสร็จ\n      } else {\n        alert('เกิดข้อผิดพลาดในการเพิ่มงาน: ' + error.message);\n        console.error('Error adding job:', error);\n      }\n      setLoading(false); // ปิด loading หลังจากเสร็จสิ้น\n    }\n  };\n\n  // ฟังก์ชันสำหรับเปลี่ยนสถานะ\n  const handleStatusChange = async (jobId, newStatus, completedDate) => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบเพื่อเปลี่ยนสถานะ');\n      return;\n    }\n\n    console.log(`Attempting to update job ${jobId} to status: ${newStatus}, completed_date: ${completedDate}`);\n    const { data: updatedJob, error } = await supabase\n      .from('jobs')\n      .update({ status: newStatus, completed_date: completedDate })\n      .eq('id', jobId) // แก้ไขกลับ ไม่ต้องแปลงเป็น string\n      .select(); // เพิ่ม .select() ที่นี่เพื่อให้ได้ข้อมูลที่อัปเดตกลับมา\n\n    if (error) {\n      console.error('Error updating status to Supabase:', error);\n      alert('เกิดข้อผิดพลาดในการเปลี่ยนสถานะ: ' + error.message);\n      return; // Exit if update fails\n    }\n\n    console.log(`Supabase update successful for job ${jobId}. Data:`, updatedJob);\n\n      if (newStatus === 'เสร็จแล้ว') {\n        // อัปเดตสถานะใน local state ก่อนเพื่อเริ่ม Animation\n        setJobs(jobs.map(j => j.id === jobId ? { ...j, status: newStatus, completed_date: completedDate } : j));\n        setAnimatingJobId(jobId); // เริ่ม Animation fade-out\n        \n        // ส่งการอัปเดตไปยัง Supabase (ไม่ต้องรอผล) \n        // ไม่ต้อง await ตรงนี้ เพื่อไม่ให้ block UI และให้ Animation ทำงานก่อน\n      // โค้ดส่วนนี้ถูกลบออก เนื่องจากมีการอัปเดตสถานะไปแล้วที่ด้านบน (บรรทัด 389-392)\n      // supabase\n      //   .from('jobs')\n      //   .update({ status: newStatus, completed_date: completedDate })\n      //   .eq('id', jobId);\n\n        setTimeout(async () => {\n          if (updatedJob && updatedJob.length > 0) {\n            // ใช้ข้อมูลที่อัปเดตแล้วจาก Supabase โดยตรง ไม่ต้อง re-fetch ทั้งหมด\n            const newJobsState = jobs.map(j => j.id === updatedJob[0].id ? updatedJob[0] : j);\n            setJobs(sortJobs(newJobsState) || []); // ใช้ sortJobs ตรงนี้\n            console.log('Jobs state updated for \"เสร็จแล้ว\" status with updated job data.');\n\n            // เลื่อนไปยัง job ที่เสร็จแล้วหลังจากโหลดและจัดเรียงใหม่\n            if (jobRefs.current[jobId]) {\n              jobRefs.current[jobId].scrollIntoView({\n                behavior: 'smooth',\n                block: 'end'\n              });\n            }\n          } else {\n            // Fallback: If updatedJob is null/empty (shouldn't happen with .select()), re-fetch\n            console.warn('Updated job data was null or empty after .select(). Re-fetching all jobs.');\n          const { data: jobsData, error: jobsError } = await supabase.from('jobs')\n            .select('*')\n              .order('created_at', { ascending: true });\n          if (!jobsError) {\n              setJobs(sortJobs(jobsData) || []);\n              console.log('Jobs state updated for \"เสร็จแล้ว\" status with sorted data (full reload).');\n              if (jobRefs.current[jobId]) {\n                jobRefs.current[jobId].scrollIntoView({\n                  behavior: 'smooth',\n                  block: 'end'\n                });\n              }\n          } else {\n            alert('เกิดข้อผิดพลาดในการโหลดงานใหม่หลังจากเปลี่ยนสถานะ (หลัง Animation): ' + jobsError.message);\n            console.error('Error fetching jobs after status update (post-animation):', jobsError);\n            }\n          }\n          setAnimatingJobId(null); // ลบ animatingJobId ออกเมื่อ Animation เสร็จสิ้น\n        }, 500); // หน่วงเวลา 500ms ให้ตรงกับ CSS transition\n      } else {\n        // หากเปลี่ยนสถานะอื่นที่ไม่ใช่ 'เสร็จแล้ว' ให้รีโหลดและจัดเรียงทันที\n        // และยังคงส่งอัปเดตไป Supabase โดยไม่ใช้ setTimeout\n        // ไม่ต้องอัปเดตซ้ำ เพราะได้ await ด้านบนแล้ว\n\n        // ใช้ updatedJob ที่ได้จาก Supabase มาอัปเดต local state โดยตรง\n        if (updatedJob && updatedJob.length > 0) {\n          setJobs(sortJobs(jobs.map(j => j.id === updatedJob[0].id ? updatedJob[0] : j)) || []);\n          console.log('Jobs state updated for non-\"เสร็จแล้ว\" status with updated job data.');\n        } else {\n          // หากไม่มีข้อมูลจาก updatedJob (เช่น update ไม่พบ id) ให้ reload ทั้งหมด\n          console.log('Fetching all jobs because updatedJob was empty or null for non-\"เสร็จแล้ว\" status update...');\n          const { data: jobsData, error: jobsError } = await supabase.from('jobs')\n            .select('*')\n            .order('created_at', { ascending: true }); \n          if (!jobsError) {\n            setJobs(sortJobs(jobsData) || []);\n            console.log('Jobs state updated for non-\"เสร็จแล้ว\" status with sorted data (full reload).');\n          } else {\n            alert('เกิดข้อผิดพลาดในการโหลดงานใหม่หลังจากเปลี่ยนสถานะ: ' + jobsError.message);\n            console.error('Error fetching jobs after status update:', jobsError);\n          }\n        }\n    }\n  };\n\n  const handleLogout = async () => {\n    const { error } = await supabase.auth.signOut();\n    if (error) {\n      console.error('Logout error:', error);\n      alert('เกิดข้อผิดพลาดในการออกจากระบบ: ' + error.message);\n    } else {\n      setUser(null);\n      setJobs([]);\n      setProfiles([]);\n      setLoading(false);\n      console.log('Logged out successfully.');\n    }\n  };\n\n  const handleEditRemark = (jobId, currentRemark) => {\n    setEditingRemarkId(jobId);\n    setNewRemark(currentRemark || ''); // กำหนดค่า input ด้วยข้อความเดิม\n  };\n\n  const handleSaveRemark = async (jobId, newRemarkContent) => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบก่อนบันทึก Remark');\n      return;\n    }\n    setLoading(true);\n    const { data: updatedJob, error } = await supabase\n      .from('jobs')\n      .update({ remark: newRemarkContent })\n      .eq('id', jobId)\n      .select();\n    setLoading(false);\n\n    if (!error) {\n      // หลังจากบันทึก Remark สำเร็จ ให้ดึงงานทั้งหมดมาใหม่แล้วจัดเรียง\n      const { data: jobsData, error: jobsError } = await supabase.from('jobs')\n        .select('*')\n        .order('created_at', { ascending: true }); // ดึงมาตาม created_at ก่อน แล้วค่อยมาเรียง client-side\n      if (!jobsError) {\n        setJobs(sortJobs(jobsData) || []); // ใช้ sortJobs ตรงนี้\n      } else {\n        alert('เกิดข้อผิดพลาดในการโหลดงานใหม่หลังจากบันทึก Remark: ' + jobsError.message);\n        console.error('Error fetching jobs after remark update:', jobsError);\n      }\n      setEditingRemarkId(null);\n      setNewRemark('');\n    } else {\n      alert('เกิดข้อผิดพลาดในการบันทึก Remark: ' + error.message);\n      console.error('Error saving remark:', error);\n    }\n  };\n\n  const handleExport = () => {\n    if (!user) {\n      alert('กรุณาเข้าสู่ระบบก่อนส่งออกข้อมูล');\n      return;\n    }\n    alert('ฟังก์ชันส่งออกข้อมูลยังไม่พร้อมใช้งาน');\n    console.log('Export functionality not yet implemented.');\n  };\n\n  return (\n    <div className=\"App\">\n      <div style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center', marginBottom: 10 }}>\n        {user ? (\n          <>\n            <span style={{ marginRight: 8 }}>เข้าสู่ระบบ: {getDisplayName()}</span>\n            <button onClick={handleLogout}>Logout</button>\n          </>\n        ) : (\n          <button onClick={() => { setShowAuthModal(true); setAuthMode('login'); }}>ล็อกอิน</button>\n        )}\n      </div>\n      {errorMsg && <div style={{ color: 'red', textAlign: 'center' }}>{errorMsg}</div>}\n      <AuthModal show={showAuthModal} mode={authMode} onClose={() => setShowAuthModal(false)} onSwitchMode={setAuthMode} />\n      <h1>Coilmaster Electronics - Weekly Job Dashboard</h1>\n      <div className=\"add-job\">\n        <textarea // เปลี่ยนจาก input เป็น textarea\n          rows=\"3\" // กำหนดความสูงเริ่มต้น\n          placeholder=\"หัวข้อใหม่\" // ย้าย placeholder มาที่นี่\n          value={newJob}\n          onChange={(e) => setNewJob(e.target.value)}\n          disabled={!user}\n          style={{ width: '100%', minHeight: '60px', boxSizing: 'border-box', resize: 'vertical' }} // เพิ่ม style\n        />\n        <input\n          type=\"text\"\n          placeholder=\"ผู้รับผิดชอบ\"\n          value={newAssignedTo}\n          onChange={(e) => setNewAssignedTo(e.target.value)}\n          disabled={!user}\n        />\n        <input\n          type=\"date\"\n          value={newDueDate}\n          onChange={(e) => setNewDueDate(e.target.value)}\n          placeholder=\"วันที่ครบกำหนด\"\n          disabled={!user}\n        />\n        <button onClick={handleAddJob} disabled={!user}>เพิ่มหัวข้อ</button>\n        <button onClick={handleExport} disabled={!user} style={{ marginLeft: '10px' }}>ส่งออก</button>\n      </div>\n\n      {loading && <p>Loading jobs...</p>}\n\n      <div style={{ overflowX: 'auto' }}>\n        <table className=\"job-table\">\n          <colgroup>\n            <col style={{ width: '5%' }} />{/* ลำดับ */}\n            <col style={{ width: '23%' }} />{/* เนื้อหางาน - ปรับลด */}\n            <col style={{ width: '10%' }} />{/* ผู้รับผิดชอบ */}\n            <col style={{ width: '10%' }} />{/* วันที่ได้รับงาน */}\n            <col style={{ width: '10%' }} />{/* วันที่คาดการ */}\n            <col style={{ width: '10%' }} />{/* วันที่เสร็จ */}\n            <col style={{ width: '15%' }} />{/* หมายเหตุ */}\n            <col style={{ width: '10%' }} />{/* สถานะ - ปรับเพิ่ม */}\n            <col style={{ width: '9%' }} />{/* ดำเนินการ - ปรับเพิ่ม */}\n          </colgroup>\n          <thead>\n            <tr>\n              <th>ลำดับ</th>\n              <th>เนื้อหางาน</th>\n              <th>ผู้รับผิดชอบ</th>\n              <th>วันที่ได้รับงาน</th>\n              <th>วันที่คาดการ</th>\n              <th>วันที่เสร็จ</th>\n              <th>หมายเหตุ</th>\n              <th>สถานะ</th>\n              <th>ดำเนินการ</th>\n            </tr>\n          </thead>\n          <tbody>\n            {jobs.map((job, index) => {\n              return (\n                <tr\n                  key={job.id}\n                  className={job.id === animatingJobId && job.status === 'เสร็จแล้ว' ? 'job-completed-fade-out' : ''}\n                  ref={el => (jobRefs.current[job.id] = el)} // กำหนด ref ให้กับแต่ละแถว\n                >\n                  <td>{index + 1}</td>\n                  <td dangerouslySetInnerHTML={{ __html: job.title.replace(/\\n/g, '<br/>') }} />\n                  <td>{job.assigned_to || '-'}</td>\n                  <td>{formatDateToYYMMDD(job.assigned_date)}</td>\n                  <td>{formatDateToYYMMDD(job.due_date)}</td>\n                  <td>{formatDateToYYMMDD(job.completed_date)}</td>\n                  <td style={{ color: job.remark ? '#333' : '#aaa' }}>\n                    {editingRemarkId === job.id ? (\n                      <textarea\n                        rows=\"3\"\n                        value={newRemark}\n                        onChange={(e) => setNewRemark(e.target.value)}\n                        onBlur={() => handleSaveRemark(job.id, newRemark)}\n                        autoFocus\n                        style={{ width: '100%', minHeight: '60px', boxSizing: 'border-box' }}\n                      />\n                    ) : (\n                      <span\n                        onClick={() => handleEditRemark(job.id, job.remark)}\n                        dangerouslySetInnerHTML={{ __html: (job.remark || 'Add').replace(/\\n/g, '<br/>') }}\n                      />\n                    )}\n                  </td>\n                  <td>\n                    <select\n                      value={job.status}\n                      onChange={(e) => {\n                        const newStatus = e.target.value;\n                        const newCompletedDate = newStatus === 'เสร็จแล้ว' ? new Date().toISOString().split('T')[0] : null;\n                        handleStatusChange(job.id, newStatus, newCompletedDate);\n                      }}\n                      disabled={!user}\n                      className={!user ? 'disabled-select' : ''}\n                    >\n                      <option value=\"ดำเนินการอยู่\">ดำเนินการ</option>\n                      <option value=\"รออนุมัติ\">รออนุมัติ</option>\n                      <option value=\"เลื่อน\">เลื่อน</option>\n                      <option value=\"เสร็จแล้ว\">เสร็จแล้ว</option>\n                    </select>\n                  </td>\n                  <td>\n                    {job.status === 'เสร็จแล้ว' ? (\n                      <button className=\"button-delete\" onClick={() => handleDeleteJob(job.id)}>\n                        ลบ\n                      </button>\n                    ) : (\n                      <button className=\"button-on-process\" disabled={true}>\n                        On process\n                      </button>\n                    )}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n      <div className=\"pie-chart\">\n        <svg width=\"200\" height=\"200\" viewBox=\"0 0 40 40\">\n          <circle r=\"16\" cx=\"20\" cy=\"20\" fill=\"#eee\" />\n          <circle\n            r=\"16\"\n            cx=\"20\"\n            cy=\"20\"\n            fill=\"transparent\"\n            stroke=\"#4caf50\"\n            strokeWidth=\"4\"\n            strokeDasharray={circumference}\n            strokeDashoffset={circumference - progress}\n            strokeLinecap=\"round\"\n            style={{ transition: 'stroke-dashoffset 0.5s' }}\n          />\n          <text x=\"20\" y=\"24\" textAnchor=\"middle\" fontSize=\"8\" fill=\"#333\">{percent}%</text>\n        </svg>\n        <div>งานสำเร็จ {doneCount} จาก {jobs.length} หัวข้อ</div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAO,WAAW;AAClB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEA,SAASC,GAAGA,CAAA,EAAG;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EACb,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgB,MAAM,EAAEC,SAAS,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACkB,aAAa,EAAEC,gBAAgB,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACwB,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC0B,IAAI,EAAEC,OAAO,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAAC4B,aAAa,EAAEC,gBAAgB,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC8B,QAAQ,EAAEC,WAAW,CAAC,GAAG/B,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;EACnD,MAAM,CAACgC,QAAQ,EAAEC,WAAW,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkC,eAAe,EAAEC,kBAAkB,CAAC,GAAGnC,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACoC,cAAc,EAAEC,iBAAiB,CAAC,GAAGrC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC5D,MAAMsC,OAAO,GAAGpC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE5B;EACAD,SAAS,CAAC,MAAM;IACdE,QAAQ,CAACoC,IAAI,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;MAAEC,IAAI;MAAEC;IAAM,CAAC,KAAK;MAChD,IAAIA,KAAK,IAAI,CAACD,IAAI,CAAChB,IAAI,EAAE;QACvBC,OAAO,CAAC,IAAI,CAAC;QACb;QACAiB,MAAM,CAACC,IAAI,CAACC,YAAY,CAAC,CACtBC,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,UAAU,CAAC,KAAK,CAAC,CAAC,CAClCC,OAAO,CAAEF,CAAC,IAAKF,YAAY,CAACK,UAAU,CAACH,CAAC,CAAC,CAAC;MAC/C,CAAC,MAAM;QACLrB,OAAO,CAACe,IAAI,CAAChB,IAAI,CAAC;MACpB;MACAD,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC;IACFtB,QAAQ,CAACoC,IAAI,CAACa,iBAAiB,CAAC,OAAOC,MAAM,EAAEC,OAAO,KAAK;MACzD3B,OAAO,CAAC,CAAA2B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE5B,IAAI,KAAI,IAAI,CAAC;MAC9Bb,OAAO,CAAC,EAAE,CAAC;MACXE,WAAW,CAAC,EAAE,CAAC;MACfU,UAAU,CAAC,KAAK,CAAC;MACjB;MACA,IAAI6B,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAE5B,IAAI,EAAE;QAAA,IAAA6B,qBAAA;QACjB,MAAM;UAAEb,IAAI,EAAEc;QAAQ,CAAC,GAAG,MAAMrD,QAAQ,CACrCsD,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,SAAS,EAAEL,OAAO,CAAC5B,IAAI,CAACkC,EAAE,CAAC,CAC9BC,MAAM,CAAC,CAAC;QACX,IAAI,CAACL,OAAO,KAAAD,qBAAA,GAAID,OAAO,CAAC5B,IAAI,CAACoC,aAAa,cAAAP,qBAAA,eAA1BA,qBAAA,CAA4BQ,SAAS,EAAE;UACrD,MAAM5D,QAAQ,CAACsD,IAAI,CAAC,UAAU,CAAC,CAACO,MAAM,CAAC,CACrC;YAAEC,OAAO,EAAEX,OAAO,CAAC5B,IAAI,CAACkC,EAAE;YAAEM,QAAQ,EAAEZ,OAAO,CAAC5B,IAAI,CAACoC,aAAa,CAACC;UAAU,CAAC,CAC7E,CAAC;QACJ;MACF;MACA;MACA,MAAM;QAAErB,IAAI,EAAEyB;MAAY,CAAC,GAAG,MAAMhE,QAAQ,CAACsD,IAAI,CAAC,UAAU,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC;MACzE3C,WAAW,CAACoD,WAAW,IAAI,EAAE,CAAC;IAChC,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAlE,SAAS,CAAC,MAAM;IACdmE,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE3C,IAAI,CAAC;IACnDD,UAAU,CAAC,IAAI,CAAC;IAChB2C,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;IAC1DpC,WAAW,CAAC,EAAE,CAAC;IAEf,MAAMqC,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF;QACA,MAAM;UAAE5B,IAAI,EAAE6B,WAAW;UAAE5B,KAAK,EAAE6B;QAAa,CAAC,GAAG,MAAMrE,QAAQ,CAACoC,IAAI,CAACkC,UAAU,CAAC,CAAC;QACnFL,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEE,WAAW,CAAC;QACzC,IAAIC,YAAY,EAAE,MAAMA,YAAY;;QAEpC;QACA,IAAI9C,IAAI,EAAE;UACR0C,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;UAC9C,MAAM;YAAE3B,IAAI,EAAEgC,YAAY;YAAE/B,KAAK,EAAEgC;UAAc,CAAC,GAAG,MAAMxE,QAAQ,CAACsD,IAAI,CAAC,UAAU,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC;UAChGU,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE;YAAE3B,IAAI,EAAEgC,YAAY;YAAE/B,KAAK,EAAEgC;UAAc,CAAC,CAAC;UACnF,IAAIA,aAAa,EAAE,MAAMA,aAAa;UACtC5D,WAAW,CAAC2D,YAAY,IAAI,EAAE,CAAC;UAC/BN,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE;YAAE3B,IAAI,EAAEgC,YAAY;YAAE/B,KAAK,EAAEgC;UAAc,CAAC,CAAC;;UAEvF;UACAP,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE3C,IAAI,CAACkC,EAAE,CAAC;UAChCQ,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEK,YAAY,CAAC;UACtC,MAAME,KAAK,GAAG,CAACF,YAAY,IAAI,EAAE,EAAEG,IAAI,CACpCC,CAAC,IAAKC,MAAM,CAACD,CAAC,CAACb,OAAO,CAAC,CAACe,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,KAAKF,MAAM,CAACrD,IAAI,CAACkC,EAAE,CAAC,CAACoB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CACvF,CAAC;UACDb,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEO,KAAK,CAAC;QACtC,CAAC,MAAM;UACL7D,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;QACnB;;QAEA;QACAqD,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;QAC1C,MAAM;UAAE3B,IAAI,EAAEwC,QAAQ;UAAEvC,KAAK,EAAEwC;QAAU,CAAC,GAAG,MAAMhF,QAAQ,CAACsD,IAAI,CAAC,MAAM,CAAC,CACrEC,MAAM,CAAC,GAAG,CAAC,CACX0B,KAAK,CAAC,YAAY,EAAE;UAAEC,SAAS,EAAE;QAAK,CAAC,CAAC,CAAC,CAAC;QAC7CjB,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE;UAAE3B,IAAI,EAAEwC,QAAQ;UAAEvC,KAAK,EAAEwC;QAAU,CAAC,CAAC;QACvE,IAAIA,SAAS,EAAE,MAAMA,SAAS;QAC9BtE,OAAO,CAACyE,QAAQ,CAACJ,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACnCd,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE;UAAE3B,IAAI,EAAEwC,QAAQ;UAAEvC,KAAK,EAAEwC;QAAU,CAAC,CAAC;;QAE3E;QACA,IAAID,QAAQ,IAAIA,QAAQ,CAACK,MAAM,GAAG,CAAC,EAAE;UACnCnB,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEa,QAAQ,CAAC,CAAC,CAAC,CAACtB,EAAE,EAAE,OAAOsB,QAAQ,CAAC,CAAC,CAAC,CAACtB,EAAE,CAAC;QAClF;MAEF,CAAC,CAAC,OAAO4B,GAAG,EAAE;QACZvD,WAAW,CAAC,iCAAiC,GAAGuD,GAAG,CAACC,OAAO,CAAC;QAC5DrB,OAAO,CAACzB,KAAK,CAAC,qCAAqC,EAAE6C,GAAG,CAAC;MAC3D,CAAC,SAAS;QACR/D,UAAU,CAAC,KAAK,CAAC;QACjB2C,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC;MACnE;IACF,CAAC;IAEDC,SAAS,CAAC,CAAC;;IAEX;IACAoB,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAErB,SAAS,CAAC;;IAE3C;IACA,OAAO,MAAM;MACXoB,MAAM,CAACE,mBAAmB,CAAC,OAAO,EAAEtB,SAAS,CAAC;IAChD,CAAC;EACH,CAAC,EAAE,CAAC5C,IAAI,CAAC,CAAC;;EAEV;EACA,MAAMmE,SAAS,GAAGjF,IAAI,CAAC2E,MAAM;EAC7B,MAAMO,SAAS,GAAGlF,IAAI,CAACmC,MAAM,CAACgD,GAAG,IAAIA,GAAG,CAACC,MAAM,KAAK,WAAW,CAAC,CAACT,MAAM;EACvE,MAAMU,OAAO,GAAGJ,SAAS,KAAK,CAAC,GAAG,GAAG,GAAGK,IAAI,CAACC,KAAK,CAAEL,SAAS,GAAGD,SAAS,GAAI,GAAG,CAAC;EACjF,MAAMO,MAAM,GAAG,EAAE;EACjB,MAAMC,aAAa,GAAG,CAAC,GAAGH,IAAI,CAACI,EAAE,GAAGF,MAAM;EAC1C,MAAMG,QAAQ,GAAIN,OAAO,GAAG,GAAG,GAAII,aAAa;;EAEhD;EACA,MAAMG,SAAS,GAAGA,CAAC;IAAEC,IAAI;IAAEC,IAAI;IAAEC,OAAO;IAAEC;EAAa,CAAC,KAAK;IAAAlG,EAAA;IAC3D,MAAM,CAACmG,KAAK,EAAEC,QAAQ,CAAC,GAAG9G,QAAQ,CAAC,EAAE,CAAC;IACtC,MAAM,CAAC+G,QAAQ,EAAEC,WAAW,CAAC,GAAGhH,QAAQ,CAAC,EAAE,CAAC;IAC5C,MAAM,CAACiH,UAAU,EAAEC,aAAa,CAAC,GAAGlH,QAAQ,CAAC,EAAE,CAAC;IAChD,MAAM,CAACmH,QAAQ,EAAEC,WAAW,CAAC,GAAGpH,QAAQ,CAAC,EAAE,CAAC;IAC5C,MAAM,CAACqH,SAAS,EAAEC,YAAY,CAAC,GAAGtH,QAAQ,CAAC,EAAE,CAAC;IAC9C,MAAM,CAACuH,OAAO,EAAEC,UAAU,CAAC,GAAGxH,QAAQ,CAAC,EAAE,CAAC;IAE1CC,SAAS,CAAC,MAAM;MACd6G,QAAQ,CAAC,EAAE,CAAC;MACZE,WAAW,CAAC,EAAE,CAAC;MACfE,aAAa,CAAC,EAAE,CAAC;MACjBE,WAAW,CAAC,EAAE,CAAC;MACfE,YAAY,CAAC,EAAE,CAAC;MAChBE,UAAU,CAAC,EAAE,CAAC;IAChB,CAAC,EAAE,CAACd,IAAI,EAAED,IAAI,CAAC,CAAC;;IAEhB;IACAxG,SAAS,CAAC,MAAM;MACd,IAAIyG,IAAI,KAAK,QAAQ,IAAIa,OAAO,EAAE;QAChC,MAAME,KAAK,GAAGC,UAAU,CAAC,MAAM;UAC7Bd,YAAY,CAAC,OAAO,CAAC;QACvB,CAAC,EAAE,IAAI,CAAC;QACR,OAAO,MAAMe,YAAY,CAACF,KAAK,CAAC;MAClC;IACF,CAAC,EAAE,CAACF,OAAO,EAAEb,IAAI,EAAEE,YAAY,CAAC,CAAC;IAEjC,MAAMgB,WAAW,GAAG,MAAOC,CAAC,IAAK;MAC/BA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBR,YAAY,CAAC,EAAE,CAAC;MAAEE,UAAU,CAAC,EAAE,CAAC;MAChC,MAAM;QAAE7E;MAAM,CAAC,GAAG,MAAMxC,QAAQ,CAACoC,IAAI,CAACwF,kBAAkB,CAAC;QAAElB,KAAK;QAAEE;MAAS,CAAC,CAAC;MAC7E,IAAIpE,KAAK,EAAE2E,YAAY,CAAC3E,KAAK,CAAC8C,OAAO,CAAC,CAAC,KAClCkB,OAAO,CAAC,CAAC;IAChB,CAAC;IACD,MAAMqB,YAAY,GAAG,MAAOH,CAAC,IAAK;MAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBR,YAAY,CAAC,EAAE,CAAC;MAAEE,UAAU,CAAC,EAAE,CAAC;MAChC,IAAIT,QAAQ,KAAKE,UAAU,EAAE;QAC3BK,YAAY,CAAC,mBAAmB,CAAC;QACjC;MACF;MACA,IAAI,CAACH,QAAQ,CAACnC,IAAI,CAAC,CAAC,EAAE;QACpBsC,YAAY,CAAC,qBAAqB,CAAC;QACnC;MACF;MACA,MAAM;QAAE3E;MAAM,CAAC,GAAG,MAAMxC,QAAQ,CAACoC,IAAI,CAAC0F,MAAM,CAAC;QAC3CpB,KAAK;QACLE,QAAQ;QACRmB,OAAO,EAAE;UACPxF,IAAI,EAAE;YAAEqB,SAAS,EAAEoD;UAAS;QAC9B;MACF,CAAC,CAAC;MACF,IAAIxE,KAAK,EAAE2E,YAAY,CAAC3E,KAAK,CAAC8C,OAAO,CAAC,CAAC,KAClC+B,UAAU,CAAC,mCAAmC,CAAC;IACtD,CAAC;IACD,MAAMW,WAAW,GAAG,MAAON,CAAC,IAAK;MAC/BA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBR,YAAY,CAAC,EAAE,CAAC;MAAEE,UAAU,CAAC,EAAE,CAAC;MAChC,MAAM;QAAE7E;MAAM,CAAC,GAAG,MAAMxC,QAAQ,CAACoC,IAAI,CAAC6F,qBAAqB,CAACvB,KAAK,CAAC;MAClE,IAAIlE,KAAK,EAAE2E,YAAY,CAAC3E,KAAK,CAAC8C,OAAO,CAAC,CAAC,KAClC+B,UAAU,CAAC,sCAAsC,CAAC;IACzD,CAAC;IAED,oBACEnH,OAAA;MACEgI,SAAS,EAAC,gBAAgB;MAC1BC,KAAK,EAAE;QAAEC,OAAO,EAAE9B,IAAI,GAAG,MAAM,GAAG;MAAO,CAAE;MAAA+B,QAAA,eAE3CnI,OAAA;QAAKgI,SAAS,EAAC,OAAO;QAACI,OAAO,EAAEZ,CAAC,IAAIA,CAAC,CAACa,eAAe,CAAC,CAAE;QAAAF,QAAA,gBACvDnI,OAAA;UAAQgI,SAAS,EAAC,aAAa;UAACI,OAAO,EAAE9B,OAAQ;UAAA6B,QAAA,EAAC;QAAC;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAC3DpC,IAAI,KAAK,OAAO,iBACfrG,OAAA;UAAM0I,QAAQ,EAAEnB,WAAY;UAAAY,QAAA,gBAC1BnI,OAAA;YAAAmI,QAAA,EAAI;UAAW;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACpBzI,OAAA;YAAO2I,IAAI,EAAC,OAAO;YAACC,WAAW,EAAC,OAAO;YAACC,KAAK,EAAErC,KAAM;YAACsC,QAAQ,EAAEtB,CAAC,IAAIf,QAAQ,CAACe,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;YAACG,QAAQ;YAACC,YAAY,EAAC;UAAU;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClIzI,OAAA;YAAO2I,IAAI,EAAC,UAAU;YAACC,WAAW,EAAC,UAAU;YAACC,KAAK,EAAEnC,QAAS;YAACoC,QAAQ,EAAEtB,CAAC,IAAIb,WAAW,CAACa,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;YAACG,QAAQ;YAACC,YAAY,EAAC;UAAkB;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACtJzI,OAAA;YAAQ2I,IAAI,EAAC,QAAQ;YAAAR,QAAA,EAAC;UAAW;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC1CzI,OAAA;YAAKgI,SAAS,EAAC,YAAY;YAAAG,QAAA,gBACzBnI,OAAA;cAAMoI,OAAO,EAAEA,CAAA,KAAM7B,YAAY,CAAC,QAAQ,CAAE;cAAA4B,QAAA,EAAC;YAAW;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,MAC/D,eAAAzI,OAAA;cAAMoI,OAAO,EAAEA,CAAA,KAAM7B,YAAY,CAAC,OAAO,CAAE;cAAA4B,QAAA,EAAC;YAAY;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CAAC,EACLzB,SAAS,iBAAIhH,OAAA;YAAKgI,SAAS,EAAC,aAAa;YAAAG,QAAA,EAAEnB;UAAS;YAAAsB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CACP,EACApC,IAAI,KAAK,QAAQ,iBAChBrG,OAAA;UAAM0I,QAAQ,EAAEf,YAAa;UAAAQ,QAAA,gBAC3BnI,OAAA;YAAIiI,KAAK,EAAE;cAAEiB,SAAS,EAAE;YAAS,CAAE;YAAAf,QAAA,EAAC;UAAW;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACpDzI,OAAA;YAAO2I,IAAI,EAAC,MAAM;YAACC,WAAW,EAAC,0EAAwB;YAACC,KAAK,EAAE/B,QAAS;YAACgC,QAAQ,EAAEtB,CAAC,IAAIT,WAAW,CAACS,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;YAACG,QAAQ;UAAA;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChIzI,OAAA;YAAO2I,IAAI,EAAC,OAAO;YAACC,WAAW,EAAC,OAAO;YAACC,KAAK,EAAErC,KAAM;YAACsC,QAAQ,EAAEtB,CAAC,IAAIf,QAAQ,CAACe,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;YAACG,QAAQ;YAACC,YAAY,EAAC;UAAU;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClIzI,OAAA;YAAO2I,IAAI,EAAC,UAAU;YAACC,WAAW,EAAC,UAAU;YAACC,KAAK,EAAEnC,QAAS;YAACoC,QAAQ,EAAEtB,CAAC,IAAIb,WAAW,CAACa,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;YAACG,QAAQ;YAACC,YAAY,EAAC;UAAc;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClJzI,OAAA;YAAO2I,IAAI,EAAC,UAAU;YAACC,WAAW,EAAC,kBAAkB;YAACC,KAAK,EAAEjC,UAAW;YAACkC,QAAQ,EAAEtB,CAAC,IAAIX,aAAa,CAACW,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;YAACG,QAAQ;YAACC,YAAY,EAAC;UAAc;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC9JzI,OAAA;YAAQ2I,IAAI,EAAC,QAAQ;YAAAR,QAAA,EAAC;UAAW;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC1CzI,OAAA;YAAKgI,SAAS,EAAC,YAAY;YAAAG,QAAA,eACzBnI,OAAA;cAAMoI,OAAO,EAAEA,CAAA,KAAM7B,YAAY,CAAC,OAAO,CAAE;cAAA4B,QAAA,EAAC;YAAW;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3D,CAAC,EACLvB,OAAO,iBAAIlH,OAAA;YAAKgI,SAAS,EAAC,eAAe;YAAAG,QAAA,EAAEjB;UAAO;YAAAoB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EACzDzB,SAAS,iBAAIhH,OAAA;YAAKgI,SAAS,EAAC,aAAa;YAAAG,QAAA,EAAEnB;UAAS;YAAAsB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CACP,EACApC,IAAI,KAAK,OAAO,iBACfrG,OAAA;UAAM0I,QAAQ,EAAEZ,WAAY;UAAAK,QAAA,gBAC1BnI,OAAA;YAAAmI,QAAA,EAAI;UAAc;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACvBzI,OAAA;YAAO2I,IAAI,EAAC,OAAO;YAACC,WAAW,EAAC,OAAO;YAACC,KAAK,EAAErC,KAAM;YAACsC,QAAQ,EAAEtB,CAAC,IAAIf,QAAQ,CAACe,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;YAACG,QAAQ;YAACC,YAAY,EAAC;UAAU;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClIzI,OAAA;YAAQ2I,IAAI,EAAC,QAAQ;YAAAR,QAAA,EAAC;UAAsB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACrDzI,OAAA;YAAKgI,SAAS,EAAC,YAAY;YAAAG,QAAA,eACzBnI,OAAA;cAAMoI,OAAO,EAAEA,CAAA,KAAM7B,YAAY,CAAC,OAAO,CAAE;cAAA4B,QAAA,EAAC;YAAW;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3D,CAAC,EACLvB,OAAO,iBAAIlH,OAAA;YAAKgI,SAAS,EAAC,eAAe;YAAAG,QAAA,EAAEjB;UAAO;YAAAoB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EACzDzB,SAAS,iBAAIhH,OAAA;YAAKgI,SAAS,EAAC,aAAa;YAAAG,QAAA,EAAEnB;UAAS;YAAAsB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CACP;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;;EAED;EAAApI,EAAA,CAnHM8F,SAAS;EAoHf,MAAMgD,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI,CAAC9H,IAAI,EAAE,OAAO,EAAE;IACpB,MAAM8B,OAAO,GAAG1C,QAAQ,CAAC+D,IAAI,CAAEC,CAAC,IAAKC,MAAM,CAACD,CAAC,CAACb,OAAO,CAAC,CAACe,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,KAAKF,MAAM,CAACrD,IAAI,CAACkC,EAAE,CAAC,CAACoB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;IACrH;IACA,OAAOzB,OAAO,GAAGA,OAAO,CAACU,QAAQ,GAAGxC,IAAI,CAACmF,KAAK;EAChD,CAAC;;EAED;EACA,MAAM4C,eAAe,GAAIC,MAAM,IAAK;IAClC,MAAMlG,OAAO,GAAG1C,QAAQ,CAAC+D,IAAI,CAAEC,CAAC,IAAKC,MAAM,CAACD,CAAC,CAACb,OAAO,CAAC,CAACe,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,KAAKF,MAAM,CAAC2E,MAAM,CAAC,CAAC1E,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;IACpH;IACA,IAAIzB,OAAO,EAAE,OAAOA,OAAO,CAACU,QAAQ;IACpC,IAAIxC,IAAI,IAAIqD,MAAM,CAACrD,IAAI,CAACkC,EAAE,CAAC,CAACoB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,KAAKF,MAAM,CAAC2E,MAAM,CAAC,CAAC1E,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EAAE,OAAOvD,IAAI,CAACmF,KAAK;IAC3G,OAAO,GAAG;EACZ,CAAC;EAED,MAAM8C,kBAAkB,GAAIC,UAAU,IAAK;IACzC,IAAI,CAACA,UAAU,EAAE,OAAO,GAAG;IAC3B,MAAM,CAACC,IAAI,EAAEC,KAAK,EAAEC,GAAG,CAAC,GAAGH,UAAU,CAACI,KAAK,CAAC,GAAG,CAAC;IAChD,OAAO,GAAGH,IAAI,CAACI,KAAK,CAAC,CAAC,CAAC,IAAIH,KAAK,IAAIC,GAAG,EAAE;EAC3C,CAAC;;EAED;EACA,MAAMzE,QAAQ,GAAI4E,SAAS,IAAK;IAC9B,OAAO,CAAC,GAAGA,SAAS,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACnC,MAAMC,YAAY,GAAGF,CAAC,CAACpE,MAAM,KAAK,WAAW;MAC7C,MAAMuE,YAAY,GAAGF,CAAC,CAACrE,MAAM,KAAK,WAAW;;MAE7C;MACA,IAAIsE,YAAY,IAAI,CAACC,YAAY,EAAE,OAAO,CAAC;MAC3C,IAAI,CAACD,YAAY,IAAIC,YAAY,EAAE,OAAO,CAAC,CAAC;;MAE5C;MACA,IAAI,CAACD,YAAY,IAAI,CAACC,YAAY,EAAE;QAAE;QACpC;QACA,MAAMC,KAAK,GAAGJ,CAAC,CAACK,QAAQ,GAAG,IAAIC,IAAI,CAACN,CAAC,CAACK,QAAQ,CAAC,GAAG,IAAIC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;QAC1E,MAAMC,KAAK,GAAGN,CAAC,CAACI,QAAQ,GAAG,IAAIC,IAAI,CAACL,CAAC,CAACI,QAAQ,CAAC,GAAG,IAAIC,IAAI,CAAC,YAAY,CAAC;QAExE,IAAIF,KAAK,GAAGG,KAAK,EAAE,OAAO,CAAC,CAAC;QAC5B,IAAIH,KAAK,GAAGG,KAAK,EAAE,OAAO,CAAC;;QAE3B;QACA,MAAMC,WAAW,GAAG,IAAIF,IAAI,CAACN,CAAC,CAACS,aAAa,CAAC;QAC7C,MAAMC,WAAW,GAAG,IAAIJ,IAAI,CAACL,CAAC,CAACQ,aAAa,CAAC;QAC7C,IAAID,WAAW,GAAGE,WAAW,EAAE,OAAO,CAAC,CAAC;QACxC,IAAIF,WAAW,GAAGE,WAAW,EAAE,OAAO,CAAC;MAEzC,CAAC,MAAM,IAAIR,YAAY,IAAIC,YAAY,EAAE;QAAE;QACzC;QACA,MAAMQ,YAAY,GAAGX,CAAC,CAACY,cAAc,GAAG,IAAIN,IAAI,CAACN,CAAC,CAACY,cAAc,CAAC,GAAG,IAAIN,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;QAC7F,MAAMO,YAAY,GAAGZ,CAAC,CAACW,cAAc,GAAG,IAAIN,IAAI,CAACL,CAAC,CAACW,cAAc,CAAC,GAAG,IAAIN,IAAI,CAAC,YAAY,CAAC;QAE3F,IAAIK,YAAY,GAAGE,YAAY,EAAE,OAAO,CAAC,CAAC;QAC1C,IAAIF,YAAY,GAAGE,YAAY,EAAE,OAAO,CAAC;;QAEzC;QACA,MAAML,WAAW,GAAG,IAAIF,IAAI,CAACN,CAAC,CAACS,aAAa,CAAC;QAC7C,MAAMC,WAAW,GAAG,IAAIJ,IAAI,CAACL,CAAC,CAACQ,aAAa,CAAC;QAC7C,IAAID,WAAW,GAAGE,WAAW,EAAE,OAAO,CAAC,CAAC;QACxC,IAAIF,WAAW,GAAGE,WAAW,EAAE,OAAO,CAAC;MACzC;MACA,OAAO,CAAC;IACV,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMI,eAAe,GAAG,MAAOtH,EAAE,IAAK;IACpC,IAAI,CAAClC,IAAI,EAAE;MACTyJ,KAAK,CAAC,kBAAkB,CAAC;MACzB;IACF;IACA/G,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAET,EAAE,CAAC;IAClC,MAAM;MAAEjB;IAAM,CAAC,GAAG,MAAMxC,QAAQ,CAACsD,IAAI,CAAC,MAAM,CAAC,CAAC2H,MAAM,CAAC,CAAC,CAACzH,EAAE,CAAC,IAAI,EAAEC,EAAE,CAAC,CAAC,CAAC;IACrE,IAAI,CAACjB,KAAK,EAAE;MACV,MAAM;QAAED,IAAI,EAAEwC,QAAQ;QAAEvC,KAAK,EAAEwC;MAAU,CAAC,GAAG,MAAMhF,QAAQ,CAACsD,IAAI,CAAC,MAAM,CAAC,CACrEC,MAAM,CAAC,GAAG,CAAC,CACX0B,KAAK,CAAC,YAAY,EAAE;QAAEC,SAAS,EAAE;MAAK,CAAC,CAAC,CAAC,CAAC;MAC7C,IAAI,CAACF,SAAS,EAAE;QACdtE,OAAO,CAACyE,QAAQ,CAACJ,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;MACrC,CAAC,MAAM;QACLiG,KAAK,CAAC,kCAAkC,GAAGhG,SAAS,CAACM,OAAO,CAAC;QAC7DrB,OAAO,CAACzB,KAAK,CAAC,oBAAoB,EAAEwC,SAAS,CAAC;MAChD;IACF,CAAC,MAAM;MACLgG,KAAK,CAAC,4BAA4B,GAAGxI,KAAK,CAAC8C,OAAO,CAAC;MACnDrB,OAAO,CAACzB,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;IAC3C;EACF,CAAC;;EAED;EACA,MAAM0I,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAAC3J,IAAI,EAAE;IAEX,MAAM4J,WAAW,GAAGtK,MAAM,CAACgE,IAAI,CAAC,CAAC;IACjC,MAAMuG,cAAc,GAAGrK,aAAa,CAAC8D,IAAI,CAAC,CAAC;IAC3C,MAAMwG,aAAa,GAAGpK,UAAU,CAAC4D,IAAI,CAAC,CAAC;IAEvC,IAAIsG,WAAW,EAAE;MACf7J,UAAU,CAAC,IAAI,CAAC;MAChB,MAAM;QAAEiB,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMxC,QAAQ,CACnCsD,IAAI,CAAC,MAAM,CAAC,CACZO,MAAM,CAAC;QACNyH,KAAK,EAAEH,WAAW;QAClBI,WAAW,EAAEH,cAAc;QAC3BtH,OAAO,EAAEvC,IAAI,CAACkC,EAAE;QAChBiH,aAAa,EAAE,IAAIH,IAAI,CAAC,CAAC,CAACiB,WAAW,CAAC,CAAC,CAAC1B,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;QACpDjE,MAAM,EAAE,eAAe;QACvByE,QAAQ,EAAEe,aAAa,IAAI;MAC7B,CAAC,CAAC,CACD9H,MAAM,CAAC,CAAC;MAEX,IAAI,CAACf,KAAK,EAAE;QACVyB,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE3B,IAAI,CAAC;QAC5C;QACA,MAAM;UAAEA,IAAI,EAAEwC,QAAQ;UAAEvC,KAAK,EAAEwC;QAAU,CAAC,GAAG,MAAMhF,QAAQ,CAACsD,IAAI,CAAC,MAAM,CAAC,CACrEC,MAAM,CAAC,GAAG,CAAC,CACX0B,KAAK,CAAC,YAAY,EAAE;UAAEC,SAAS,EAAE;QAAK,CAAC,CAAC,CAAC,CAAC;QAC7C,IAAI,CAACF,SAAS,EAAE;UACdtE,OAAO,CAACyE,QAAQ,CAACJ,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACrC,CAAC,MAAM;UACLiG,KAAK,CAAC,kCAAkC,GAAGhG,SAAS,CAACM,OAAO,CAAC;QAC/D;QACAxE,SAAS,CAAC,EAAE,CAAC;QACbE,gBAAgB,CAAC,EAAE,CAAC;QACpBE,aAAa,CAAC,EAAE,CAAC,CAAC,CAAC;MACrB,CAAC,MAAM;QACL8J,KAAK,CAAC,+BAA+B,GAAGxI,KAAK,CAAC8C,OAAO,CAAC;QACtDrB,OAAO,CAACzB,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MAC3C;MACAlB,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAMmK,kBAAkB,GAAG,MAAAA,CAAOC,KAAK,EAAEC,SAAS,EAAEC,aAAa,KAAK;IACpE,IAAI,CAACrK,IAAI,EAAE;MACTyJ,KAAK,CAAC,mCAAmC,CAAC;MAC1C;IACF;IAEA/G,OAAO,CAACC,GAAG,CAAC,4BAA4BwH,KAAK,eAAeC,SAAS,qBAAqBC,aAAa,EAAE,CAAC;IAC1G,MAAM;MAAErJ,IAAI,EAAEsJ,UAAU;MAAErJ;IAAM,CAAC,GAAG,MAAMxC,QAAQ,CAC/CsD,IAAI,CAAC,MAAM,CAAC,CACZwI,MAAM,CAAC;MAAEjG,MAAM,EAAE8F,SAAS;MAAEd,cAAc,EAAEe;IAAc,CAAC,CAAC,CAC5DpI,EAAE,CAAC,IAAI,EAAEkI,KAAK,CAAC,CAAC;IAAA,CAChBnI,MAAM,CAAC,CAAC,CAAC,CAAC;;IAEb,IAAIf,KAAK,EAAE;MACTyB,OAAO,CAACzB,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;MAC1DwI,KAAK,CAAC,mCAAmC,GAAGxI,KAAK,CAAC8C,OAAO,CAAC;MAC1D,OAAO,CAAC;IACV;IAEArB,OAAO,CAACC,GAAG,CAAC,sCAAsCwH,KAAK,SAAS,EAAEG,UAAU,CAAC;IAE3E,IAAIF,SAAS,KAAK,WAAW,EAAE;MAC7B;MACAjL,OAAO,CAACD,IAAI,CAACsL,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACvI,EAAE,KAAKiI,KAAK,GAAG;QAAE,GAAGM,CAAC;QAAEnG,MAAM,EAAE8F,SAAS;QAAEd,cAAc,EAAEe;MAAc,CAAC,GAAGI,CAAC,CAAC,CAAC;MACvG9J,iBAAiB,CAACwJ,KAAK,CAAC,CAAC,CAAC;;MAE1B;MACA;MACF;MACA;MACA;MACA;MACA;;MAEEnE,UAAU,CAAC,YAAY;QACrB,IAAIsE,UAAU,IAAIA,UAAU,CAACzG,MAAM,GAAG,CAAC,EAAE;UACvC;UACA,MAAM6G,YAAY,GAAGxL,IAAI,CAACsL,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACvI,EAAE,KAAKoI,UAAU,CAAC,CAAC,CAAC,CAACpI,EAAE,GAAGoI,UAAU,CAAC,CAAC,CAAC,GAAGG,CAAC,CAAC;UACjFtL,OAAO,CAACyE,QAAQ,CAAC8G,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;UACvChI,OAAO,CAACC,GAAG,CAAC,kEAAkE,CAAC;;UAE/E;UACA,IAAI/B,OAAO,CAAC+J,OAAO,CAACR,KAAK,CAAC,EAAE;YAC1BvJ,OAAO,CAAC+J,OAAO,CAACR,KAAK,CAAC,CAACS,cAAc,CAAC;cACpCC,QAAQ,EAAE,QAAQ;cAClBC,KAAK,EAAE;YACT,CAAC,CAAC;UACJ;QACF,CAAC,MAAM;UACL;UACApI,OAAO,CAACqI,IAAI,CAAC,2EAA2E,CAAC;UAC3F,MAAM;YAAE/J,IAAI,EAAEwC,QAAQ;YAAEvC,KAAK,EAAEwC;UAAU,CAAC,GAAG,MAAMhF,QAAQ,CAACsD,IAAI,CAAC,MAAM,CAAC,CACrEC,MAAM,CAAC,GAAG,CAAC,CACT0B,KAAK,CAAC,YAAY,EAAE;YAAEC,SAAS,EAAE;UAAK,CAAC,CAAC;UAC7C,IAAI,CAACF,SAAS,EAAE;YACZtE,OAAO,CAACyE,QAAQ,CAACJ,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjCd,OAAO,CAACC,GAAG,CAAC,2EAA2E,CAAC;YACxF,IAAI/B,OAAO,CAAC+J,OAAO,CAACR,KAAK,CAAC,EAAE;cAC1BvJ,OAAO,CAAC+J,OAAO,CAACR,KAAK,CAAC,CAACS,cAAc,CAAC;gBACpCC,QAAQ,EAAE,QAAQ;gBAClBC,KAAK,EAAE;cACT,CAAC,CAAC;YACJ;UACJ,CAAC,MAAM;YACLrB,KAAK,CAAC,sEAAsE,GAAGhG,SAAS,CAACM,OAAO,CAAC;YACjGrB,OAAO,CAACzB,KAAK,CAAC,2DAA2D,EAAEwC,SAAS,CAAC;UACrF;QACF;QACA9C,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;MAC3B,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;IACX,CAAC,MAAM;MACL;MACA;MACA;;MAEA;MACA,IAAI2J,UAAU,IAAIA,UAAU,CAACzG,MAAM,GAAG,CAAC,EAAE;QACvC1E,OAAO,CAACyE,QAAQ,CAAC1E,IAAI,CAACsL,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACvI,EAAE,KAAKoI,UAAU,CAAC,CAAC,CAAC,CAACpI,EAAE,GAAGoI,UAAU,CAAC,CAAC,CAAC,GAAGG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;QACrF/H,OAAO,CAACC,GAAG,CAAC,sEAAsE,CAAC;MACrF,CAAC,MAAM;QACL;QACAD,OAAO,CAACC,GAAG,CAAC,6FAA6F,CAAC;QAC1G,MAAM;UAAE3B,IAAI,EAAEwC,QAAQ;UAAEvC,KAAK,EAAEwC;QAAU,CAAC,GAAG,MAAMhF,QAAQ,CAACsD,IAAI,CAAC,MAAM,CAAC,CACrEC,MAAM,CAAC,GAAG,CAAC,CACX0B,KAAK,CAAC,YAAY,EAAE;UAAEC,SAAS,EAAE;QAAK,CAAC,CAAC;QAC3C,IAAI,CAACF,SAAS,EAAE;UACdtE,OAAO,CAACyE,QAAQ,CAACJ,QAAQ,CAAC,IAAI,EAAE,CAAC;UACjCd,OAAO,CAACC,GAAG,CAAC,+EAA+E,CAAC;QAC9F,CAAC,MAAM;UACL8G,KAAK,CAAC,qDAAqD,GAAGhG,SAAS,CAACM,OAAO,CAAC;UAChFrB,OAAO,CAACzB,KAAK,CAAC,0CAA0C,EAAEwC,SAAS,CAAC;QACtE;MACF;IACJ;EACF,CAAC;EAED,MAAMuH,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,MAAM;MAAE/J;IAAM,CAAC,GAAG,MAAMxC,QAAQ,CAACoC,IAAI,CAACoK,OAAO,CAAC,CAAC;IAC/C,IAAIhK,KAAK,EAAE;MACTyB,OAAO,CAACzB,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACrCwI,KAAK,CAAC,iCAAiC,GAAGxI,KAAK,CAAC8C,OAAO,CAAC;IAC1D,CAAC,MAAM;MACL9D,OAAO,CAAC,IAAI,CAAC;MACbd,OAAO,CAAC,EAAE,CAAC;MACXE,WAAW,CAAC,EAAE,CAAC;MACfU,UAAU,CAAC,KAAK,CAAC;MACjB2C,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACzC;EACF,CAAC;EAED,MAAMuI,gBAAgB,GAAGA,CAACf,KAAK,EAAEgB,aAAa,KAAK;IACjD1K,kBAAkB,CAAC0J,KAAK,CAAC;IACzBtK,YAAY,CAACsL,aAAa,IAAI,EAAE,CAAC,CAAC,CAAC;EACrC,CAAC;EAED,MAAMC,gBAAgB,GAAG,MAAAA,CAAOjB,KAAK,EAAEkB,gBAAgB,KAAK;IAC1D,IAAI,CAACrL,IAAI,EAAE;MACTyJ,KAAK,CAAC,mCAAmC,CAAC;MAC1C;IACF;IACA1J,UAAU,CAAC,IAAI,CAAC;IAChB,MAAM;MAAEiB,IAAI,EAAEsJ,UAAU;MAAErJ;IAAM,CAAC,GAAG,MAAMxC,QAAQ,CAC/CsD,IAAI,CAAC,MAAM,CAAC,CACZwI,MAAM,CAAC;MAAEe,MAAM,EAAED;IAAiB,CAAC,CAAC,CACpCpJ,EAAE,CAAC,IAAI,EAAEkI,KAAK,CAAC,CACfnI,MAAM,CAAC,CAAC;IACXjC,UAAU,CAAC,KAAK,CAAC;IAEjB,IAAI,CAACkB,KAAK,EAAE;MACV;MACA,MAAM;QAAED,IAAI,EAAEwC,QAAQ;QAAEvC,KAAK,EAAEwC;MAAU,CAAC,GAAG,MAAMhF,QAAQ,CAACsD,IAAI,CAAC,MAAM,CAAC,CACrEC,MAAM,CAAC,GAAG,CAAC,CACX0B,KAAK,CAAC,YAAY,EAAE;QAAEC,SAAS,EAAE;MAAK,CAAC,CAAC,CAAC,CAAC;MAC7C,IAAI,CAACF,SAAS,EAAE;QACdtE,OAAO,CAACyE,QAAQ,CAACJ,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;MACrC,CAAC,MAAM;QACLiG,KAAK,CAAC,sDAAsD,GAAGhG,SAAS,CAACM,OAAO,CAAC;QACjFrB,OAAO,CAACzB,KAAK,CAAC,0CAA0C,EAAEwC,SAAS,CAAC;MACtE;MACAhD,kBAAkB,CAAC,IAAI,CAAC;MACxBZ,YAAY,CAAC,EAAE,CAAC;IAClB,CAAC,MAAM;MACL4J,KAAK,CAAC,oCAAoC,GAAGxI,KAAK,CAAC8C,OAAO,CAAC;MAC3DrB,OAAO,CAACzB,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF,CAAC;EAED,MAAMsK,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAI,CAACvL,IAAI,EAAE;MACTyJ,KAAK,CAAC,kCAAkC,CAAC;MACzC;IACF;IACAA,KAAK,CAAC,uCAAuC,CAAC;IAC9C/G,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;EAC1D,CAAC;EAED,oBACEhE,OAAA;IAAKgI,SAAS,EAAC,KAAK;IAAAG,QAAA,gBAClBnI,OAAA;MAAKiI,KAAK,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAE2E,cAAc,EAAE,UAAU;QAAEC,UAAU,EAAE,QAAQ;QAAEC,YAAY,EAAE;MAAG,CAAE;MAAA5E,QAAA,EACjG9G,IAAI,gBACHrB,OAAA,CAAAE,SAAA;QAAAiI,QAAA,gBACEnI,OAAA;UAAMiI,KAAK,EAAE;YAAE+E,WAAW,EAAE;UAAE,CAAE;UAAA7E,QAAA,GAAC,sEAAa,EAACgB,cAAc,CAAC,CAAC;QAAA;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACvEzI,OAAA;UAAQoI,OAAO,EAAEiE,YAAa;UAAAlE,QAAA,EAAC;QAAM;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,eAC9C,CAAC,gBAEHzI,OAAA;QAAQoI,OAAO,EAAEA,CAAA,KAAM;UAAE5G,gBAAgB,CAAC,IAAI,CAAC;UAAEE,WAAW,CAAC,OAAO,CAAC;QAAE,CAAE;QAAAyG,QAAA,EAAC;MAAO;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAC1F;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EACL9G,QAAQ,iBAAI3B,OAAA;MAAKiI,KAAK,EAAE;QAAEgF,KAAK,EAAE,KAAK;QAAE/D,SAAS,EAAE;MAAS,CAAE;MAAAf,QAAA,EAAExG;IAAQ;MAAA2G,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eAChFzI,OAAA,CAACmG,SAAS;MAACC,IAAI,EAAE7E,aAAc;MAAC8E,IAAI,EAAE5E,QAAS;MAAC6E,OAAO,EAAEA,CAAA,KAAM9E,gBAAgB,CAAC,KAAK,CAAE;MAAC+E,YAAY,EAAE7E;IAAY;MAAA4G,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACrHzI,OAAA;MAAAmI,QAAA,EAAI;IAA6C;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACtDzI,OAAA;MAAKgI,SAAS,EAAC,SAAS;MAAAG,QAAA,gBACtBnI,OAAA;QAAU;QACRkN,IAAI,EAAC,GAAG,CAAC;QAAA;QACTtE,WAAW,EAAC,8DAAY,CAAC;QAAA;QACzBC,KAAK,EAAElI,MAAO;QACdmI,QAAQ,EAAGtB,CAAC,IAAK5G,SAAS,CAAC4G,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;QAC3CsE,QAAQ,EAAE,CAAC9L,IAAK;QAChB4G,KAAK,EAAE;UAAEmF,KAAK,EAAE,MAAM;UAAEC,SAAS,EAAE,MAAM;UAAEC,SAAS,EAAE,YAAY;UAAEC,MAAM,EAAE;QAAW,CAAE,CAAC;MAAA;QAAAjF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3F,CAAC,eACFzI,OAAA;QACE2I,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,0EAAc;QAC1BC,KAAK,EAAEhI,aAAc;QACrBiI,QAAQ,EAAGtB,CAAC,IAAK1G,gBAAgB,CAAC0G,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;QAClDsE,QAAQ,EAAE,CAAC9L;MAAK;QAAAiH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB,CAAC,eACFzI,OAAA;QACE2I,IAAI,EAAC,MAAM;QACXE,KAAK,EAAE9H,UAAW;QAClB+H,QAAQ,EAAGtB,CAAC,IAAKxG,aAAa,CAACwG,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;QAC/CD,WAAW,EAAC,sFAAgB;QAC5BuE,QAAQ,EAAE,CAAC9L;MAAK;QAAAiH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB,CAAC,eACFzI,OAAA;QAAQoI,OAAO,EAAE4C,YAAa;QAACmC,QAAQ,EAAE,CAAC9L,IAAK;QAAA8G,QAAA,EAAC;MAAW;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACpEzI,OAAA;QAAQoI,OAAO,EAAEwE,YAAa;QAACO,QAAQ,EAAE,CAAC9L,IAAK;QAAC4G,KAAK,EAAE;UAAEuF,UAAU,EAAE;QAAO,CAAE;QAAArF,QAAA,EAAC;MAAM;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3F,CAAC,EAELtH,OAAO,iBAAInB,OAAA;MAAAmI,QAAA,EAAG;IAAe;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAElCzI,OAAA;MAAKiI,KAAK,EAAE;QAAEwF,SAAS,EAAE;MAAO,CAAE;MAAAtF,QAAA,eAChCnI,OAAA;QAAOgI,SAAS,EAAC,WAAW;QAAAG,QAAA,gBAC1BnI,OAAA;UAAAmI,QAAA,gBACEnI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAK;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC/BzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAM;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChCzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAM;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChCzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAM;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChCzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAM;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChCzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAM;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChCzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAM;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChCzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAM;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChCzI,OAAA;YAAKiI,KAAK,EAAE;cAAEmF,KAAK,EAAE;YAAK;UAAE;YAAA9E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvB,CAAC,eACXzI,OAAA;UAAAmI,QAAA,eACEnI,OAAA;YAAAmI,QAAA,gBACEnI,OAAA;cAAAmI,QAAA,EAAI;YAAK;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACdzI,OAAA;cAAAmI,QAAA,EAAI;YAAU;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACnBzI,OAAA;cAAAmI,QAAA,EAAI;YAAY;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACrBzI,OAAA;cAAAmI,QAAA,EAAI;YAAe;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACxBzI,OAAA;cAAAmI,QAAA,EAAI;YAAY;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACrBzI,OAAA;cAAAmI,QAAA,EAAI;YAAW;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACpBzI,OAAA;cAAAmI,QAAA,EAAI;YAAQ;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACjBzI,OAAA;cAAAmI,QAAA,EAAI;YAAK;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACdzI,OAAA;cAAAmI,QAAA,EAAI;YAAS;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACRzI,OAAA;UAAAmI,QAAA,EACG5H,IAAI,CAACsL,GAAG,CAAC,CAACnG,GAAG,EAAEgI,KAAK,KAAK;YACxB,oBACE1N,OAAA;cAEEgI,SAAS,EAAEtC,GAAG,CAACnC,EAAE,KAAKxB,cAAc,IAAI2D,GAAG,CAACC,MAAM,KAAK,WAAW,GAAG,wBAAwB,GAAG,EAAG;cACnGgI,GAAG,EAAEC,EAAE,IAAK3L,OAAO,CAAC+J,OAAO,CAACtG,GAAG,CAACnC,EAAE,CAAC,GAAGqK,EAAI,CAAC;cAAA;cAAAzF,QAAA,gBAE3CnI,OAAA;gBAAAmI,QAAA,EAAKuF,KAAK,GAAG;cAAC;gBAAApF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACpBzI,OAAA;gBAAI6N,uBAAuB,EAAE;kBAAEC,MAAM,EAAEpI,GAAG,CAAC0F,KAAK,CAAC2C,OAAO,CAAC,KAAK,EAAE,OAAO;gBAAE;cAAE;gBAAAzF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC9EzI,OAAA;gBAAAmI,QAAA,EAAKzC,GAAG,CAAC2F,WAAW,IAAI;cAAG;gBAAA/C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjCzI,OAAA;gBAAAmI,QAAA,EAAKmB,kBAAkB,CAAC5D,GAAG,CAAC8E,aAAa;cAAC;gBAAAlC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAChDzI,OAAA;gBAAAmI,QAAA,EAAKmB,kBAAkB,CAAC5D,GAAG,CAAC0E,QAAQ;cAAC;gBAAA9B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAC3CzI,OAAA;gBAAAmI,QAAA,EAAKmB,kBAAkB,CAAC5D,GAAG,CAACiF,cAAc;cAAC;gBAAArC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjDzI,OAAA;gBAAIiI,KAAK,EAAE;kBAAEgF,KAAK,EAAEvH,GAAG,CAACiH,MAAM,GAAG,MAAM,GAAG;gBAAO,CAAE;gBAAAxE,QAAA,EAChDtG,eAAe,KAAK6D,GAAG,CAACnC,EAAE,gBACzBvD,OAAA;kBACEkN,IAAI,EAAC,GAAG;kBACRrE,KAAK,EAAE5H,SAAU;kBACjB6H,QAAQ,EAAGtB,CAAC,IAAKtG,YAAY,CAACsG,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE;kBAC9CmF,MAAM,EAAEA,CAAA,KAAMvB,gBAAgB,CAAC/G,GAAG,CAACnC,EAAE,EAAEtC,SAAS,CAAE;kBAClDgN,SAAS;kBACThG,KAAK,EAAE;oBAAEmF,KAAK,EAAE,MAAM;oBAAEC,SAAS,EAAE,MAAM;oBAAEC,SAAS,EAAE;kBAAa;gBAAE;kBAAAhF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtE,CAAC,gBAEFzI,OAAA;kBACEoI,OAAO,EAAEA,CAAA,KAAMmE,gBAAgB,CAAC7G,GAAG,CAACnC,EAAE,EAAEmC,GAAG,CAACiH,MAAM,CAAE;kBACpDkB,uBAAuB,EAAE;oBAAEC,MAAM,EAAE,CAACpI,GAAG,CAACiH,MAAM,IAAI,KAAK,EAAEoB,OAAO,CAAC,KAAK,EAAE,OAAO;kBAAE;gBAAE;kBAAAzF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpF;cACF;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACLzI,OAAA;gBAAAmI,QAAA,eACEnI,OAAA;kBACE6I,KAAK,EAAEnD,GAAG,CAACC,MAAO;kBAClBmD,QAAQ,EAAGtB,CAAC,IAAK;oBACf,MAAMiE,SAAS,GAAGjE,CAAC,CAACuB,MAAM,CAACF,KAAK;oBAChC,MAAMqF,gBAAgB,GAAGzC,SAAS,KAAK,WAAW,GAAG,IAAIpB,IAAI,CAAC,CAAC,CAACiB,WAAW,CAAC,CAAC,CAAC3B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;oBAClG4B,kBAAkB,CAAC7F,GAAG,CAACnC,EAAE,EAAEkI,SAAS,EAAEyC,gBAAgB,CAAC;kBACzD,CAAE;kBACFf,QAAQ,EAAE,CAAC9L,IAAK;kBAChB2G,SAAS,EAAE,CAAC3G,IAAI,GAAG,iBAAiB,GAAG,EAAG;kBAAA8G,QAAA,gBAE1CnI,OAAA;oBAAQ6I,KAAK,EAAC,gFAAe;oBAAAV,QAAA,EAAC;kBAAS;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eAChDzI,OAAA;oBAAQ6I,KAAK,EAAC,wDAAW;oBAAAV,QAAA,EAAC;kBAAS;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eAC5CzI,OAAA;oBAAQ6I,KAAK,EAAC,sCAAQ;oBAAAV,QAAA,EAAC;kBAAM;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eACtCzI,OAAA;oBAAQ6I,KAAK,EAAC,wDAAW;oBAAAV,QAAA,EAAC;kBAAS;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACP,CAAC,eACLzI,OAAA;gBAAAmI,QAAA,EACGzC,GAAG,CAACC,MAAM,KAAK,WAAW,gBACzB3F,OAAA;kBAAQgI,SAAS,EAAC,eAAe;kBAACI,OAAO,EAAEA,CAAA,KAAMyC,eAAe,CAACnF,GAAG,CAACnC,EAAE,CAAE;kBAAA4E,QAAA,EAAC;gBAE1E;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,gBAETzI,OAAA;kBAAQgI,SAAS,EAAC,mBAAmB;kBAACmF,QAAQ,EAAE,IAAK;kBAAAhF,QAAA,EAAC;gBAEtD;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ;cACT;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA,GAtDA/C,GAAG,CAACnC,EAAE;cAAA+E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAuDT,CAAC;UAET,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eACNzI,OAAA;MAAKgI,SAAS,EAAC,WAAW;MAAAG,QAAA,gBACxBnI,OAAA;QAAKoN,KAAK,EAAC,KAAK;QAACe,MAAM,EAAC,KAAK;QAACC,OAAO,EAAC,WAAW;QAAAjG,QAAA,gBAC/CnI,OAAA;UAAQqO,CAAC,EAAC,IAAI;UAACC,EAAE,EAAC,IAAI;UAACC,EAAE,EAAC,IAAI;UAACC,IAAI,EAAC;QAAM;UAAAlG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC7CzI,OAAA;UACEqO,CAAC,EAAC,IAAI;UACNC,EAAE,EAAC,IAAI;UACPC,EAAE,EAAC,IAAI;UACPC,IAAI,EAAC,aAAa;UAClBC,MAAM,EAAC,SAAS;UAChBC,WAAW,EAAC,GAAG;UACfC,eAAe,EAAE3I,aAAc;UAC/B4I,gBAAgB,EAAE5I,aAAa,GAAGE,QAAS;UAC3C2I,aAAa,EAAC,OAAO;UACrB5G,KAAK,EAAE;YAAE6G,UAAU,EAAE;UAAyB;QAAE;UAAAxG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC,eACFzI,OAAA;UAAM+O,CAAC,EAAC,IAAI;UAACC,CAAC,EAAC,IAAI;UAACC,UAAU,EAAC,QAAQ;UAACC,QAAQ,EAAC,GAAG;UAACV,IAAI,EAAC,MAAM;UAAArG,QAAA,GAAEvC,OAAO,EAAC,GAAC;QAAA;UAAA0C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/E,CAAC,eACNzI,OAAA;QAAAmI,QAAA,GAAK,yDAAU,EAAC1C,SAAS,EAAC,sBAAK,EAAClF,IAAI,CAAC2E,MAAM,EAAC,uCAAO;MAAA;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACrI,GAAA,CAtrBQD,GAAG;AAAAgP,EAAA,GAAHhP,GAAG;AAwrBZ,eAAeA,GAAG;AAAC,IAAAgP,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}